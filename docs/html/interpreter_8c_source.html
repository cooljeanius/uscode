<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ResKnife: tools/lci/lciframework/interpreter.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ResKnife
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">tools/lci/lciframework/interpreter.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &quot;<a class="code" href="interpreter_8h.html">interpreter.h</a>&quot;</span>
<a name="l00002"></a>00002 
<a name="l00008"></a><a class="code" href="interpreter_8h.html#aa775c9107ae005e912e3167801648dee">00008</a> <span class="keywordtype">char</span> *createString(<span class="keywordtype">char</span> *data) 
<a name="l00009"></a>00009 {
<a name="l00010"></a>00010         <span class="keywordtype">char</span> *p = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * (strlen(data) + 1));
<a name="l00011"></a>00011         <span class="keywordflow">if</span> (!p) {
<a name="l00012"></a>00012                 perror(<span class="stringliteral">&quot;malloc&quot;</span>);
<a name="l00013"></a>00013                 <span class="keywordflow">return</span> NULL;
<a name="l00014"></a>00014         }
<a name="l00015"></a>00015         strcpy(p, data);
<a name="l00016"></a>00016         <span class="keywordflow">return</span> p;
<a name="l00017"></a>00017 }
<a name="l00018"></a>00018 
<a name="l00024"></a><a class="code" href="interpreter_8h.html#a494ae7c921c6e7994e07d927f1dd619b">00024</a> <a class="code" href="struct_value_object.html">ValueObject</a> *createNilValueObject(<span class="keywordtype">void</span>)
<a name="l00025"></a>00025 {
<a name="l00026"></a>00026         <a class="code" href="struct_value_object.html">ValueObject</a> *p = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_value_object.html">ValueObject</a>));
<a name="l00027"></a>00027         <span class="keywordflow">if</span> (!p) {
<a name="l00028"></a>00028                 perror(<span class="stringliteral">&quot;malloc&quot;</span>);
<a name="l00029"></a>00029                 <span class="keywordflow">return</span> NULL;
<a name="l00030"></a>00030         }
<a name="l00031"></a>00031         p-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> = <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a523067b7870725372ce9aa1399a8abba">VT_NIL</a>;
<a name="l00032"></a>00032         p-&gt;<a class="code" href="struct_value_object.html#a08cfa02ff5b2f4ee7307c62c95089373">semaphore</a> = 1;
<a name="l00033"></a>00033         <span class="keywordflow">return</span> p;
<a name="l00034"></a>00034 }
<a name="l00035"></a>00035 
<a name="l00042"></a><a class="code" href="interpreter_8h.html#a83170df5413454d013a2624ffde40134">00042</a> <a class="code" href="struct_value_object.html">ValueObject</a> *createBooleanValueObject(<span class="keywordtype">int</span> data) 
<a name="l00043"></a>00043 {
<a name="l00044"></a>00044         <a class="code" href="struct_value_object.html">ValueObject</a> *p = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_value_object.html">ValueObject</a>));
<a name="l00045"></a>00045         <span class="keywordflow">if</span> (!p) {
<a name="l00046"></a>00046                 perror(<span class="stringliteral">&quot;malloc&quot;</span>);
<a name="l00047"></a>00047                 <span class="keywordflow">return</span> NULL;
<a name="l00048"></a>00048         }
<a name="l00049"></a>00049         p-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> = <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a>;
<a name="l00050"></a>00050         p-&gt;<a class="code" href="struct_value_object.html#a66e5eb0433f8150bf24cfc86856efe4e">data</a>.<a class="code" href="union_value_data.html#abc2f11fb39990140dbc322610ba52f70">i</a> = (data != 0);
<a name="l00051"></a>00051         p-&gt;<a class="code" href="struct_value_object.html#a08cfa02ff5b2f4ee7307c62c95089373">semaphore</a> = 1;
<a name="l00052"></a>00052         <span class="keywordflow">return</span> p;
<a name="l00053"></a>00053 }
<a name="l00054"></a>00054 
<a name="l00061"></a><a class="code" href="interpreter_8h.html#a3dcf1ed83c5fe0efe4d7f1c72c023945">00061</a> <a class="code" href="struct_value_object.html">ValueObject</a> *createIntegerValueObject(<span class="keywordtype">int</span> data) 
<a name="l00062"></a>00062 {
<a name="l00063"></a>00063         <a class="code" href="struct_value_object.html">ValueObject</a> *p = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_value_object.html">ValueObject</a>));
<a name="l00064"></a>00064         <span class="keywordflow">if</span> (!p) {
<a name="l00065"></a>00065                 perror(<span class="stringliteral">&quot;malloc&quot;</span>);
<a name="l00066"></a>00066                 <span class="keywordflow">return</span> NULL;
<a name="l00067"></a>00067         }
<a name="l00068"></a>00068         p-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> = <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>;
<a name="l00069"></a>00069         p-&gt;<a class="code" href="struct_value_object.html#a66e5eb0433f8150bf24cfc86856efe4e">data</a>.<a class="code" href="union_value_data.html#abc2f11fb39990140dbc322610ba52f70">i</a> = data;
<a name="l00070"></a>00070         p-&gt;<a class="code" href="struct_value_object.html#a08cfa02ff5b2f4ee7307c62c95089373">semaphore</a> = 1;
<a name="l00071"></a>00071         <span class="keywordflow">return</span> p;
<a name="l00072"></a>00072 }
<a name="l00073"></a>00073 
<a name="l00080"></a><a class="code" href="interpreter_8h.html#aea96b6d2469b6f3d4531987c644c2d63">00080</a> <a class="code" href="struct_value_object.html">ValueObject</a> *createFloatValueObject(<span class="keywordtype">float</span> data) 
<a name="l00081"></a>00081 {
<a name="l00082"></a>00082         <a class="code" href="struct_value_object.html">ValueObject</a> *p = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_value_object.html">ValueObject</a>));
<a name="l00083"></a>00083         <span class="keywordflow">if</span> (!p) {
<a name="l00084"></a>00084                 perror(<span class="stringliteral">&quot;malloc&quot;</span>);
<a name="l00085"></a>00085                 <span class="keywordflow">return</span> NULL;
<a name="l00086"></a>00086         }
<a name="l00087"></a>00087         p-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> = <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a361c0d0ff5ba71f4ddd9633d3f79635f">VT_FLOAT</a>;
<a name="l00088"></a>00088         p-&gt;<a class="code" href="struct_value_object.html#a66e5eb0433f8150bf24cfc86856efe4e">data</a>.<a class="code" href="union_value_data.html#a85311c11b54183bb571f35ed70af37a9">f</a> = data;
<a name="l00089"></a>00089         p-&gt;<a class="code" href="struct_value_object.html#a08cfa02ff5b2f4ee7307c62c95089373">semaphore</a> = 1;
<a name="l00090"></a>00090         <span class="keywordflow">return</span> p;
<a name="l00091"></a>00091 }
<a name="l00092"></a>00092 
<a name="l00098"></a><a class="code" href="interpreter_8h.html#a9c7124b50cb92fb20edc6c2963a5f2b8">00098</a> <a class="code" href="struct_value_object.html">ValueObject</a> *createStringValueObject(<span class="keywordtype">char</span> *data) 
<a name="l00099"></a>00099 {
<a name="l00100"></a>00100         <a class="code" href="struct_value_object.html">ValueObject</a> *p = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_value_object.html">ValueObject</a>));
<a name="l00101"></a>00101         <span class="keywordflow">if</span> (!p) {
<a name="l00102"></a>00102                 perror(<span class="stringliteral">&quot;malloc&quot;</span>);
<a name="l00103"></a>00103                 <span class="keywordflow">return</span> NULL;
<a name="l00104"></a>00104         }
<a name="l00105"></a>00105         p-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> = <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a7d0ada66d85d8eb695f3bdd2e48b5976">VT_STRING</a>;
<a name="l00106"></a>00106         p-&gt;<a class="code" href="struct_value_object.html#a66e5eb0433f8150bf24cfc86856efe4e">data</a>.<a class="code" href="union_value_data.html#a2639b48549e0788d5f9a3da6ea9cb0e4">s</a> = data;
<a name="l00107"></a>00107         p-&gt;<a class="code" href="struct_value_object.html#a08cfa02ff5b2f4ee7307c62c95089373">semaphore</a> = 1;
<a name="l00108"></a>00108         <span class="keywordflow">return</span> p;
<a name="l00109"></a>00109 }
<a name="l00110"></a>00110 
<a name="l00136"></a><a class="code" href="interpreter_8h.html#a030b889cd6487c903b7e12e69268cdc4">00136</a> <a class="code" href="struct_value_object.html">ValueObject</a> *copyValueObject(<a class="code" href="struct_value_object.html">ValueObject</a> *value) 
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138         <a class="code" href="interpreter_8h.html#acdac0b055f8acfc246c8d1f6cc249012">V</a>(value);
<a name="l00139"></a>00139         <span class="keywordflow">return</span> value;
<a name="l00140"></a>00140 }
<a name="l00141"></a>00141 
<a name="l00164"></a><a class="code" href="interpreter_8h.html#a47864225786b36609969a3fea1658a98">00164</a> <span class="keywordtype">void</span> deleteValueObject(<a class="code" href="struct_value_object.html">ValueObject</a> *value) 
<a name="l00165"></a>00165 {
<a name="l00166"></a>00166         <span class="keywordflow">if</span> (!value) <span class="keywordflow">return</span>;
<a name="l00167"></a>00167         <a class="code" href="interpreter_8h.html#add157945a6056e97010b859dd7b32c2c">P</a>(value);
<a name="l00168"></a>00168         <span class="keywordflow">if</span> (!value-&gt;<a class="code" href="struct_value_object.html#a08cfa02ff5b2f4ee7307c62c95089373">semaphore</a>) {
<a name="l00169"></a>00169                 <span class="keywordflow">if</span> (value-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> == <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a7d0ada66d85d8eb695f3bdd2e48b5976">VT_STRING</a>) free(value-&gt;<a class="code" href="struct_value_object.html#a66e5eb0433f8150bf24cfc86856efe4e">data</a>.<a class="code" href="union_value_data.html#a2639b48549e0788d5f9a3da6ea9cb0e4">s</a>);
<a name="l00170"></a>00170                 free(value);
<a name="l00171"></a>00171         }
<a name="l00172"></a>00172 }
<a name="l00173"></a>00173 
<a name="l00185"></a><a class="code" href="interpreter_8h.html#ae981d9226d812c444fc16aa82755a483">00185</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cc">ReturnType</a> type,    
<a name="l00186"></a>00186                                  <a class="code" href="struct_value_object.html">ValueObject</a> *value) 
<a name="l00187"></a>00187 {
<a name="l00188"></a>00188         <a class="code" href="struct_return_object.html">ReturnObject</a> *p = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_return_object.html">ReturnObject</a>));
<a name="l00189"></a>00189         <span class="keywordflow">if</span> (!p) {
<a name="l00190"></a>00190                 perror(<span class="stringliteral">&quot;malloc&quot;</span>);
<a name="l00191"></a>00191                 <span class="keywordflow">return</span> NULL;
<a name="l00192"></a>00192         }
<a name="l00193"></a>00193         p-&gt;<a class="code" href="struct_return_object.html#a79da4f77fc9fa5dfeefbd750b0caddb0">type</a> = type;
<a name="l00194"></a>00194         p-&gt;<a class="code" href="struct_return_object.html#a52bd553a4949e0f49f377778402e2cbe">value</a> = value;
<a name="l00195"></a>00195         <span class="keywordflow">return</span> p;
<a name="l00196"></a>00196 }
<a name="l00197"></a>00197 
<a name="l00206"></a><a class="code" href="interpreter_8h.html#a573290ef3b6c111b59ad34136dd52d56">00206</a> <span class="keywordtype">void</span> deleteReturnObject(<a class="code" href="struct_return_object.html">ReturnObject</a> *<span class="keywordtype">object</span>) 
<a name="l00207"></a>00207 {
<a name="l00208"></a>00208         <span class="keywordflow">if</span> (!<span class="keywordtype">object</span>) <span class="keywordflow">return</span>;
<a name="l00209"></a>00209         <span class="keywordflow">if</span> (object-&gt;<a class="code" href="struct_return_object.html#a79da4f77fc9fa5dfeefbd750b0caddb0">type</a> == <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccae089a7a50c323705d8c848d0308ca41b">RT_RETURN</a>)
<a name="l00210"></a>00210                 deleteValueObject(object-&gt;<a class="code" href="struct_return_object.html#a52bd553a4949e0f49f377778402e2cbe">value</a>);
<a name="l00211"></a>00211         free(<span class="keywordtype">object</span>);
<a name="l00212"></a>00212 }
<a name="l00213"></a>00213 
<a name="l00226"></a><a class="code" href="interpreter_8h.html#a00f475c904bf21ba3d14fa47177948ff">00226</a> <a class="code" href="structscopeobject.html">ScopeObject</a> *createScopeObject(<a class="code" href="structscopeobject.html">ScopeObject</a> *parent) 
<a name="l00227"></a>00227 {
<a name="l00228"></a>00228         <a class="code" href="structscopeobject.html">ScopeObject</a> *p = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structscopeobject.html">ScopeObject</a>));
<a name="l00229"></a>00229         <span class="keywordflow">if</span> (!p) {
<a name="l00230"></a>00230                 perror(<span class="stringliteral">&quot;malloc&quot;</span>);
<a name="l00231"></a>00231                 <span class="keywordflow">return</span> NULL;
<a name="l00232"></a>00232         }
<a name="l00233"></a>00233         p-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a> = createNilValueObject();
<a name="l00234"></a>00234         <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a>) {
<a name="l00235"></a>00235                 free(p);
<a name="l00236"></a>00236                 <span class="keywordflow">return</span> NULL;
<a name="l00237"></a>00237         }
<a name="l00238"></a>00238         p-&gt;<a class="code" href="structscopeobject.html#af8cb43430f28df6a4935d53ec1ac470b">numvals</a> = 0;
<a name="l00239"></a>00239         p-&gt;<a class="code" href="structscopeobject.html#afcb602890b0a936c43648cb06691c19d">names</a> = NULL;
<a name="l00240"></a>00240         p-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a> = NULL;
<a name="l00241"></a>00241         p-&gt;<a class="code" href="structscopeobject.html#aa2e35271cf1ca0ecb0f8d256f6d3f78e">parent</a> = parent;
<a name="l00242"></a>00242         <span class="keywordflow">return</span> p;
<a name="l00243"></a>00243 }
<a name="l00244"></a>00244 
<a name="l00255"></a><a class="code" href="interpreter_8h.html#a2d477a01d56c2e2aed64ad096c6d5417">00255</a> <span class="keywordtype">void</span> deleteScopeObject(<a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l00256"></a>00256 {
<a name="l00257"></a>00257         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l00258"></a>00258         <span class="keywordflow">if</span> (!scope) <span class="keywordflow">return</span>;
<a name="l00259"></a>00259         <span class="keywordflow">for</span> (n = 0; n &lt; scope-&gt;<a class="code" href="structscopeobject.html#af8cb43430f28df6a4935d53ec1ac470b">numvals</a>; n++) {
<a name="l00260"></a>00260                 <span class="comment">/* The individual names are pointers to existing IdentifierNode</span>
<a name="l00261"></a>00261 <span class="comment">                 * structures, so don&#39;t free them here. */</span>
<a name="l00262"></a>00262                 deleteValueObject(scope-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a>[n]);
<a name="l00263"></a>00263         }
<a name="l00264"></a>00264         free(scope-&gt;<a class="code" href="structscopeobject.html#afcb602890b0a936c43648cb06691c19d">names</a>);
<a name="l00265"></a>00265         free(scope-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a>);
<a name="l00266"></a>00266         deleteValueObject(scope-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a>);
<a name="l00267"></a>00267         free(scope);
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00285"></a><a class="code" href="interpreter_8h.html#aad6397fe13daa28d2d902c4f75434360">00285</a> <a class="code" href="struct_value_object.html">ValueObject</a> *getScopeValue(<a class="code" href="structscopeobject.html">ScopeObject</a> *scope,     
<a name="l00286"></a>00286                            <a class="code" href="struct_identifier_node.html">IdentifierNode</a> *target) 
<a name="l00287"></a>00287 {
<a name="l00288"></a>00288         <a class="code" href="structscopeobject.html">ScopeObject</a> *current = scope;
<a name="l00289"></a>00289         <span class="comment">/* Traverse upwards through scopes */</span>
<a name="l00290"></a>00290         <span class="keywordflow">do</span> {
<a name="l00291"></a>00291                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l00292"></a>00292                 <span class="comment">/* Check for value in current scope */</span>
<a name="l00293"></a>00293                 <span class="keywordflow">for</span> (n = 0; n &lt; current-&gt;<a class="code" href="structscopeobject.html#af8cb43430f28df6a4935d53ec1ac470b">numvals</a>; n++) {
<a name="l00294"></a>00294                         <span class="keywordflow">if</span> (!strcmp(current-&gt;<a class="code" href="structscopeobject.html#afcb602890b0a936c43648cb06691c19d">names</a>[n]-&gt;<a class="code" href="struct_identifier_node.html#a3e2473c7676f22d1f3beebe66f0a7688">image</a>, target-&gt;<a class="code" href="struct_identifier_node.html#a3e2473c7676f22d1f3beebe66f0a7688">image</a>))
<a name="l00295"></a>00295                                 <span class="keywordflow">return</span> current-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a>[n];
<a name="l00296"></a>00296                 }
<a name="l00297"></a>00297         } <span class="keywordflow">while</span> ((current = current-&gt;<a class="code" href="structscopeobject.html#aa2e35271cf1ca0ecb0f8d256f6d3f78e">parent</a>));
<a name="l00298"></a>00298         <span class="keywordflow">return</span> NULL;
<a name="l00299"></a>00299 }
<a name="l00300"></a>00300 
<a name="l00316"></a><a class="code" href="interpreter_8h.html#a6c0c01a1af125b47b7ee6c99a944abb6">00316</a> <a class="code" href="struct_value_object.html">ValueObject</a> *getLocalScopeValue(<a class="code" href="structscopeobject.html">ScopeObject</a> *scope,     
<a name="l00317"></a>00317                                 <a class="code" href="struct_identifier_node.html">IdentifierNode</a> *target) 
<a name="l00318"></a>00318 {
<a name="l00319"></a>00319         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l00320"></a>00320         <span class="comment">/* Check for value in current scope */</span>
<a name="l00321"></a>00321         <span class="keywordflow">for</span> (n = 0; n &lt; scope-&gt;<a class="code" href="structscopeobject.html#af8cb43430f28df6a4935d53ec1ac470b">numvals</a>; n++) {
<a name="l00322"></a>00322                 <span class="keywordflow">if</span> (!strcmp(scope-&gt;<a class="code" href="structscopeobject.html#afcb602890b0a936c43648cb06691c19d">names</a>[n]-&gt;<a class="code" href="struct_identifier_node.html#a3e2473c7676f22d1f3beebe66f0a7688">image</a>, target-&gt;<a class="code" href="struct_identifier_node.html#a3e2473c7676f22d1f3beebe66f0a7688">image</a>))
<a name="l00323"></a>00323                         <span class="keywordflow">return</span> scope-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a>[n];
<a name="l00324"></a>00324         }
<a name="l00325"></a>00325         <span class="keywordflow">return</span> NULL;
<a name="l00326"></a>00326 }
<a name="l00327"></a>00327 
<a name="l00343"></a><a class="code" href="interpreter_8h.html#a102e3436ecd759c4504c688b81a8e44a">00343</a> <a class="code" href="struct_value_object.html">ValueObject</a> *createScopeValue(<a class="code" href="structscopeobject.html">ScopeObject</a> *scope,     
<a name="l00344"></a>00344                               <a class="code" href="struct_identifier_node.html">IdentifierNode</a> *target) 
<a name="l00345"></a>00345 {
<a name="l00346"></a>00346         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> newnumvals = scope-&gt;<a class="code" href="structscopeobject.html#af8cb43430f28df6a4935d53ec1ac470b">numvals</a> + 1;
<a name="l00347"></a>00347         <span class="keywordtype">void</span> *mem1 = NULL, *mem2 = NULL;
<a name="l00348"></a>00348         <span class="comment">/* Add value to local scope */</span>
<a name="l00349"></a>00349         mem1 = realloc(scope-&gt;<a class="code" href="structscopeobject.html#afcb602890b0a936c43648cb06691c19d">names</a>, <span class="keyword">sizeof</span>(<a class="code" href="struct_identifier_node.html">IdentifierNode</a> *) * newnumvals);
<a name="l00350"></a>00350         <span class="keywordflow">if</span> (!mem1) {
<a name="l00351"></a>00351                 perror(<span class="stringliteral">&quot;realloc&quot;</span>);
<a name="l00352"></a>00352                 <span class="keywordflow">return</span> NULL;
<a name="l00353"></a>00353         }
<a name="l00354"></a>00354         mem2 = realloc(scope-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a>, <span class="keyword">sizeof</span>(<a class="code" href="struct_value_object.html">ValueObject</a> *) * newnumvals);
<a name="l00355"></a>00355         <span class="keywordflow">if</span> (!mem2) {
<a name="l00356"></a>00356                 perror(<span class="stringliteral">&quot;realloc&quot;</span>);
<a name="l00357"></a>00357                 <span class="keywordflow">return</span> NULL;
<a name="l00358"></a>00358         }
<a name="l00359"></a>00359         scope-&gt;<a class="code" href="structscopeobject.html#afcb602890b0a936c43648cb06691c19d">names</a> = mem1;
<a name="l00360"></a>00360         scope-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a> = mem2;
<a name="l00361"></a>00361         scope-&gt;<a class="code" href="structscopeobject.html#afcb602890b0a936c43648cb06691c19d">names</a>[scope-&gt;<a class="code" href="structscopeobject.html#af8cb43430f28df6a4935d53ec1ac470b">numvals</a>] = target;
<a name="l00362"></a>00362         scope-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a>[scope-&gt;<a class="code" href="structscopeobject.html#af8cb43430f28df6a4935d53ec1ac470b">numvals</a>] = createNilValueObject();
<a name="l00363"></a>00363         <span class="keywordflow">if</span> (!scope-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a>[scope-&gt;<a class="code" href="structscopeobject.html#af8cb43430f28df6a4935d53ec1ac470b">numvals</a>])
<a name="l00364"></a>00364                 <span class="keywordflow">return</span> NULL;
<a name="l00365"></a>00365         scope-&gt;<a class="code" href="structscopeobject.html#af8cb43430f28df6a4935d53ec1ac470b">numvals</a> = newnumvals;
<a name="l00366"></a>00366         <span class="keywordflow">return</span> scope-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a>[scope-&gt;<a class="code" href="structscopeobject.html#af8cb43430f28df6a4935d53ec1ac470b">numvals</a> - 1];
<a name="l00367"></a>00367 }
<a name="l00368"></a>00368 
<a name="l00389"></a><a class="code" href="interpreter_8h.html#a8a3976ac7d53fdc0575dfb1cdd2882bc">00389</a> <a class="code" href="struct_value_object.html">ValueObject</a> *updateScopeValue(<a class="code" href="structscopeobject.html">ScopeObject</a> *scope,     
<a name="l00390"></a>00390                               <a class="code" href="struct_identifier_node.html">IdentifierNode</a> *target, 
<a name="l00391"></a>00391                               <a class="code" href="struct_value_object.html">ValueObject</a> *value)     
<a name="l00392"></a>00392 {
<a name="l00393"></a>00393         <a class="code" href="structscopeobject.html">ScopeObject</a> *current = scope;
<a name="l00394"></a>00394         <span class="comment">/* Traverse upwards through scopes */</span>
<a name="l00395"></a>00395         <span class="keywordflow">do</span> {
<a name="l00396"></a>00396                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l00397"></a>00397                 <span class="comment">/* Check for existing value in current scope */</span>
<a name="l00398"></a>00398                 <span class="keywordflow">for</span> (n = 0; n &lt; current-&gt;<a class="code" href="structscopeobject.html#af8cb43430f28df6a4935d53ec1ac470b">numvals</a>; n++) {
<a name="l00399"></a>00399                         <span class="keywordflow">if</span> (!strcmp(current-&gt;<a class="code" href="structscopeobject.html#afcb602890b0a936c43648cb06691c19d">names</a>[n]-&gt;<a class="code" href="struct_identifier_node.html#a3e2473c7676f22d1f3beebe66f0a7688">image</a>, target-&gt;<a class="code" href="struct_identifier_node.html#a3e2473c7676f22d1f3beebe66f0a7688">image</a>)) {
<a name="l00400"></a>00400                                 <span class="comment">/* Wipe out the old value */</span>
<a name="l00401"></a>00401                                 deleteValueObject(current-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a>[n]);
<a name="l00402"></a>00402                                 <span class="comment">/* Assign the new value */</span>
<a name="l00403"></a>00403                                 <span class="keywordflow">if</span> (value)
<a name="l00404"></a>00404                                         current-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a>[n] = value;
<a name="l00405"></a>00405                                 <span class="keywordflow">else</span>
<a name="l00406"></a>00406                                         current-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a>[n] = createNilValueObject();
<a name="l00407"></a>00407                                 <span class="keywordflow">return</span> current-&gt;<a class="code" href="structscopeobject.html#a91d5a05990706ccd0dd32356fbb534ba">values</a>[n];
<a name="l00408"></a>00408                         }
<a name="l00409"></a>00409                 }
<a name="l00410"></a>00410         } <span class="keywordflow">while</span> ((current = current-&gt;<a class="code" href="structscopeobject.html#aa2e35271cf1ca0ecb0f8d256f6d3f78e">parent</a>));
<a name="l00411"></a>00411         fprintf(stderr, <span class="stringliteral">&quot;%s:%d: unable to store variable at: %s\n&quot;</span>, target-&gt;<a class="code" href="struct_identifier_node.html#a3e2e04a380b98e30c1227ae747edbe18">fname</a>, target-&gt;<a class="code" href="struct_identifier_node.html#a64ed52f14bcfabff321d105e0a54648d">line</a>, target-&gt;<a class="code" href="struct_identifier_node.html#a3e2473c7676f22d1f3beebe66f0a7688">image</a>);
<a name="l00412"></a>00412         <span class="keywordflow">return</span> NULL;
<a name="l00413"></a>00413 }
<a name="l00414"></a>00414 
<a name="l00419"></a><a class="code" href="interpreter_8h.html#af4fc557b0414d545f179a2eaa80a1a3b">00419</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> isNumString(<span class="keyword">const</span> <span class="keywordtype">char</span> *stringdata) 
<a name="l00420"></a>00420 {
<a name="l00421"></a>00421         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l00422"></a>00422         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len = strlen(stringdata);
<a name="l00423"></a>00423         <span class="comment">/* Check for empty string */</span>
<a name="l00424"></a>00424         <span class="keywordflow">if</span> (len == 0) <span class="keywordflow">return</span> 0;
<a name="l00425"></a>00425         <span class="comment">/* Check for non-digit, non-hyphen, and non-period characters */</span>
<a name="l00426"></a>00426         <span class="keywordflow">for</span> (n = 0; n &lt; len; n++) {
<a name="l00427"></a>00427                 <span class="keywordflow">if</span> (!isdigit(stringdata[n])
<a name="l00428"></a>00428                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;.&#39;</span>
<a name="l00429"></a>00429                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;-&#39;</span>)
<a name="l00430"></a>00430                         <span class="keywordflow">return</span> 0;
<a name="l00431"></a>00431         }
<a name="l00432"></a>00432         <span class="keywordflow">return</span> 1;
<a name="l00433"></a>00433 }
<a name="l00434"></a>00434 
<a name="l00440"></a><a class="code" href="interpreter_8h.html#a3bcb2030a3649910e8c2f5e073acf436">00440</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> isHexString(<span class="keyword">const</span> <span class="keywordtype">char</span> *stringdata) 
<a name="l00441"></a>00441 {
<a name="l00442"></a>00442         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l00443"></a>00443         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len = strlen(stringdata);
<a name="l00444"></a>00444         <span class="comment">/* Check for empty string */</span>
<a name="l00445"></a>00445         <span class="keywordflow">if</span> (len == 0) <span class="keywordflow">return</span> 0;
<a name="l00446"></a>00446         <span class="comment">/* Check for non-digit and non-A-through-F characters */</span>
<a name="l00447"></a>00447         <span class="keywordflow">for</span> (n = 0; n &lt; len; n++) {
<a name="l00448"></a>00448                 <span class="keywordflow">if</span> (!isdigit(stringdata[n])
<a name="l00449"></a>00449                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;A&#39;</span>
<a name="l00450"></a>00450                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;B&#39;</span>
<a name="l00451"></a>00451                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;C&#39;</span>
<a name="l00452"></a>00452                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;D&#39;</span>
<a name="l00453"></a>00453                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;E&#39;</span>
<a name="l00454"></a>00454                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;F&#39;</span>
<a name="l00455"></a>00455                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;a&#39;</span>
<a name="l00456"></a>00456                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;b&#39;</span>
<a name="l00457"></a>00457                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;c&#39;</span>
<a name="l00458"></a>00458                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;d&#39;</span>
<a name="l00459"></a>00459                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;e&#39;</span>
<a name="l00460"></a>00460                                 &amp;&amp; stringdata[n] != <span class="charliteral">&#39;f&#39;</span>)
<a name="l00461"></a>00461                         <span class="keywordflow">return</span> 0;
<a name="l00462"></a>00462         }
<a name="l00463"></a>00463         <span class="keywordflow">return</span> 1;
<a name="l00464"></a>00464 }
<a name="l00465"></a>00465 
<a name="l00484"></a><a class="code" href="interpreter_8h.html#a17aa2b55578f49903859a41bb1d2dcba">00484</a> <a class="code" href="struct_value_object.html">ValueObject</a> *castBooleanImplicit(<a class="code" href="struct_value_object.html">ValueObject</a> *node,  
<a name="l00485"></a>00485                                  <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l00486"></a>00486 {
<a name="l00487"></a>00487         <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span> NULL;
<a name="l00488"></a>00488         <span class="keywordflow">return</span> castBooleanExplicit(node, scope);
<a name="l00489"></a>00489 }
<a name="l00490"></a>00490 
<a name="l00509"></a><a class="code" href="interpreter_8h.html#abbf91182fe9db4f0e2e3c4472f0ad431">00509</a> <a class="code" href="struct_value_object.html">ValueObject</a> *castIntegerImplicit(<a class="code" href="struct_value_object.html">ValueObject</a> *node,  
<a name="l00510"></a>00510                                  <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l00511"></a>00511 {
<a name="l00512"></a>00512         <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span> NULL;
<a name="l00513"></a>00513         <span class="keywordflow">if</span> (node-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> == <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a523067b7870725372ce9aa1399a8abba">VT_NIL</a>) {
<a name="l00514"></a>00514                 fprintf(stderr, <span class="stringliteral">&quot;Cannot implicitly cast nil\n&quot;</span>);
<a name="l00515"></a>00515                 <span class="keywordflow">return</span> NULL;
<a name="l00516"></a>00516         }
<a name="l00517"></a>00517         <span class="keywordflow">else</span> <span class="keywordflow">return</span> castIntegerExplicit(node, scope);
<a name="l00518"></a>00518 }
<a name="l00519"></a>00519 
<a name="l00538"></a><a class="code" href="interpreter_8h.html#a4132ca66d51545ce6ae5b3287070a50a">00538</a> <a class="code" href="struct_value_object.html">ValueObject</a> *castFloatImplicit(<a class="code" href="struct_value_object.html">ValueObject</a> *node,  
<a name="l00539"></a>00539                                <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l00540"></a>00540 {
<a name="l00541"></a>00541         <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span> NULL;
<a name="l00542"></a>00542         <span class="keywordflow">if</span> (node-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> == <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a523067b7870725372ce9aa1399a8abba">VT_NIL</a>) {
<a name="l00543"></a>00543                 fprintf(stderr, <span class="stringliteral">&quot;Cannot implicitly cast nil\n&quot;</span>);
<a name="l00544"></a>00544                 <span class="keywordflow">return</span> NULL;
<a name="l00545"></a>00545         }
<a name="l00546"></a>00546         <span class="keywordflow">else</span> <span class="keywordflow">return</span> castFloatExplicit(node, scope);
<a name="l00547"></a>00547 }
<a name="l00548"></a>00548 
<a name="l00571"></a><a class="code" href="interpreter_8h.html#a58e25c56eb8e00ea5b5a2eaca71733b0">00571</a> <a class="code" href="struct_value_object.html">ValueObject</a> *castStringImplicit(<a class="code" href="struct_value_object.html">ValueObject</a> *node,  
<a name="l00572"></a>00572                                 <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l00573"></a>00573 {
<a name="l00574"></a>00574         <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span> NULL;
<a name="l00575"></a>00575         <span class="keywordflow">if</span> (node-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> == <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a523067b7870725372ce9aa1399a8abba">VT_NIL</a>) {
<a name="l00576"></a>00576                 fprintf(stderr, <span class="stringliteral">&quot;Cannot implicitly cast nil\n&quot;</span>);
<a name="l00577"></a>00577                 <span class="keywordflow">return</span> NULL;
<a name="l00578"></a>00578         }
<a name="l00579"></a>00579         <span class="keywordflow">else</span> <span class="keywordflow">return</span> castStringExplicit(node, scope);
<a name="l00580"></a>00580 }
<a name="l00581"></a>00581 
<a name="l00600"></a><a class="code" href="interpreter_8h.html#a9da4535836163318aac4d7d2eb03a2d2">00600</a> <a class="code" href="struct_value_object.html">ValueObject</a> *castBooleanExplicit(<a class="code" href="struct_value_object.html">ValueObject</a> *node,  
<a name="l00601"></a>00601                                  <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l00602"></a>00602 {
<a name="l00603"></a>00603         <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span> NULL;
<a name="l00604"></a>00604         <span class="keywordflow">switch</span> (node-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>) {
<a name="l00605"></a>00605                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a523067b7870725372ce9aa1399a8abba">VT_NIL</a>:
<a name="l00606"></a>00606                         <span class="keywordflow">return</span> createBooleanValueObject(0);
<a name="l00607"></a>00607                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a>:
<a name="l00608"></a>00608                         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(node));
<a name="l00609"></a>00609                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>:
<a name="l00610"></a>00610                         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(node) != 0);
<a name="l00611"></a>00611                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a361c0d0ff5ba71f4ddd9633d3f79635f">VT_FLOAT</a>:
<a name="l00612"></a>00612                         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(node) != 0.0);
<a name="l00613"></a>00613                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a7d0ada66d85d8eb695f3bdd2e48b5976">VT_STRING</a>:
<a name="l00614"></a>00614                         <span class="keywordflow">if</span> (strstr(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(node), <span class="stringliteral">&quot;:{&quot;</span>)) {
<a name="l00615"></a>00615                                 <span class="comment">/* Perform interpolation */</span>
<a name="l00616"></a>00616                                 <a class="code" href="struct_value_object.html">ValueObject</a> *ret = NULL;
<a name="l00617"></a>00617                                 <a class="code" href="struct_value_object.html">ValueObject</a> *interp = castStringExplicit(node, scope);
<a name="l00618"></a>00618                                 <span class="keywordflow">if</span> (!interp) <span class="keywordflow">return</span> NULL;
<a name="l00619"></a>00619                                 ret = createBooleanValueObject(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(interp)[0] != <span class="charliteral">&#39;\0&#39;</span>);
<a name="l00620"></a>00620                                 deleteValueObject(interp);
<a name="l00621"></a>00621                                 <span class="keywordflow">return</span> ret;
<a name="l00622"></a>00622                         }
<a name="l00623"></a>00623                         <span class="keywordflow">else</span>
<a name="l00624"></a>00624                                 <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(node)[0] != <span class="charliteral">&#39;\0&#39;</span>);
<a name="l00625"></a>00625         }
<a name="l00626"></a>00626         fprintf(stderr, <span class="stringliteral">&quot;Unknown value type encountered during boolean cast\n&quot;</span>);
<a name="l00627"></a>00627         <span class="keywordflow">return</span> NULL;
<a name="l00628"></a>00628 }
<a name="l00629"></a>00629 
<a name="l00648"></a><a class="code" href="interpreter_8h.html#aa211d313e27c2f081edc2309a4acb020">00648</a> <a class="code" href="struct_value_object.html">ValueObject</a> *castIntegerExplicit(<a class="code" href="struct_value_object.html">ValueObject</a> *node,  
<a name="l00649"></a>00649                                  <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l00650"></a>00650 {
<a name="l00651"></a>00651         <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span> NULL;
<a name="l00652"></a>00652         <span class="keywordflow">switch</span> (node-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>) {
<a name="l00653"></a>00653                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a523067b7870725372ce9aa1399a8abba">VT_NIL</a>:
<a name="l00654"></a>00654                         <span class="keywordflow">return</span> createIntegerValueObject(0);
<a name="l00655"></a>00655                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a>:
<a name="l00656"></a>00656                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>:
<a name="l00657"></a>00657                         <span class="keywordflow">return</span> createIntegerValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(node));
<a name="l00658"></a>00658                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a361c0d0ff5ba71f4ddd9633d3f79635f">VT_FLOAT</a>:
<a name="l00659"></a>00659                         <span class="keywordflow">return</span> createIntegerValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(node));
<a name="l00660"></a>00660                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a7d0ada66d85d8eb695f3bdd2e48b5976">VT_STRING</a>:
<a name="l00661"></a>00661                         <span class="keywordflow">if</span> (strstr(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(node), <span class="stringliteral">&quot;:{&quot;</span>)) {
<a name="l00662"></a>00662                                 <span class="comment">/* Perform interpolation */</span>
<a name="l00663"></a>00663                                 <a class="code" href="struct_value_object.html">ValueObject</a> *ret = NULL;
<a name="l00664"></a>00664                                 <a class="code" href="struct_value_object.html">ValueObject</a> *interp = castStringExplicit(node, scope);
<a name="l00665"></a>00665                                 <span class="keywordtype">int</span> value;
<a name="l00666"></a>00666                                 <span class="keywordflow">if</span> (!interp) <span class="keywordflow">return</span> NULL;
<a name="l00667"></a>00667                                 <span class="keywordflow">if</span> (!isNumString(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(interp))) {
<a name="l00668"></a>00668                                         fprintf(stderr, <span class="stringliteral">&quot;Unable to cast value\n&quot;</span>);
<a name="l00669"></a>00669                                         deleteValueObject(interp);
<a name="l00670"></a>00670                                         <span class="keywordflow">return</span> NULL;
<a name="l00671"></a>00671                                 }
<a name="l00672"></a>00672                                 sscanf(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(interp), <span class="stringliteral">&quot;%i&quot;</span>, &amp;value);
<a name="l00673"></a>00673                                 ret = createIntegerValueObject(value);
<a name="l00674"></a>00674                                 deleteValueObject(interp);
<a name="l00675"></a>00675                                 <span class="keywordflow">return</span> ret;
<a name="l00676"></a>00676                         }
<a name="l00677"></a>00677                         <span class="keywordflow">else</span> {
<a name="l00678"></a>00678                                 <span class="keywordtype">int</span> value;
<a name="l00679"></a>00679                                 <span class="keywordflow">if</span> (!isNumString(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(node))) {
<a name="l00680"></a>00680                                         fprintf(stderr, <span class="stringliteral">&quot;Unable to cast value\n&quot;</span>);
<a name="l00681"></a>00681                                         <span class="keywordflow">return</span> NULL;
<a name="l00682"></a>00682                                 }
<a name="l00683"></a>00683                                 sscanf(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(node), <span class="stringliteral">&quot;%i&quot;</span>, &amp;value);
<a name="l00684"></a>00684                                 <span class="keywordflow">return</span> createIntegerValueObject(value);
<a name="l00685"></a>00685                         }
<a name="l00686"></a>00686         }
<a name="l00687"></a>00687         fprintf(stderr, <span class="stringliteral">&quot;Unknown value type encountered during integer cast\n&quot;</span>);
<a name="l00688"></a>00688         <span class="keywordflow">return</span> NULL;
<a name="l00689"></a>00689 }
<a name="l00690"></a>00690 
<a name="l00709"></a><a class="code" href="interpreter_8h.html#ab8aff5e3c1456ad85bf55cc816a84a87">00709</a> <a class="code" href="struct_value_object.html">ValueObject</a> *castFloatExplicit(<a class="code" href="struct_value_object.html">ValueObject</a> *node,  
<a name="l00710"></a>00710                                <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l00711"></a>00711 {
<a name="l00712"></a>00712         <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span> NULL;
<a name="l00713"></a>00713         <span class="keywordflow">switch</span> (node-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>) {
<a name="l00714"></a>00714                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a523067b7870725372ce9aa1399a8abba">VT_NIL</a>:
<a name="l00715"></a>00715                         <span class="keywordflow">return</span> createFloatValueObject(0.0);
<a name="l00716"></a>00716                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a>:
<a name="l00717"></a>00717                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>:
<a name="l00718"></a>00718                         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(node));
<a name="l00719"></a>00719                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a361c0d0ff5ba71f4ddd9633d3f79635f">VT_FLOAT</a>:
<a name="l00720"></a>00720                         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(node));
<a name="l00721"></a>00721                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a7d0ada66d85d8eb695f3bdd2e48b5976">VT_STRING</a>:
<a name="l00722"></a>00722                         <span class="keywordflow">if</span> (strstr(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(node), <span class="stringliteral">&quot;:{&quot;</span>)) {
<a name="l00723"></a>00723                                 <span class="comment">/* Perform interpolation */</span>
<a name="l00724"></a>00724                                 <a class="code" href="struct_value_object.html">ValueObject</a> *ret = NULL;
<a name="l00725"></a>00725                                 <a class="code" href="struct_value_object.html">ValueObject</a> *interp = castStringExplicit(node, scope);
<a name="l00726"></a>00726                                 <span class="keywordtype">float</span> value;
<a name="l00727"></a>00727                                 <span class="keywordflow">if</span> (!interp) <span class="keywordflow">return</span> NULL;
<a name="l00728"></a>00728                                 <span class="keywordflow">if</span> (!isNumString(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(interp))) {
<a name="l00729"></a>00729                                         fprintf(stderr, <span class="stringliteral">&quot;Unable to cast value\n&quot;</span>);
<a name="l00730"></a>00730                                         deleteValueObject(interp);
<a name="l00731"></a>00731                                         <span class="keywordflow">return</span> NULL;
<a name="l00732"></a>00732                                 }
<a name="l00733"></a>00733                                 sscanf(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(interp), <span class="stringliteral">&quot;%f&quot;</span>, &amp;value);
<a name="l00734"></a>00734                                 ret = createFloatValueObject(value);
<a name="l00735"></a>00735                                 deleteValueObject(interp);
<a name="l00736"></a>00736                                 <span class="keywordflow">return</span> ret;
<a name="l00737"></a>00737                         }
<a name="l00738"></a>00738                         <span class="keywordflow">else</span> {
<a name="l00739"></a>00739                                 <span class="keywordtype">float</span> value;
<a name="l00740"></a>00740                                 <span class="keywordflow">if</span> (!isNumString(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(node))) {
<a name="l00741"></a>00741                                         fprintf(stderr, <span class="stringliteral">&quot;Unable to cast value\n&quot;</span>);
<a name="l00742"></a>00742                                         <span class="keywordflow">return</span> NULL;
<a name="l00743"></a>00743                                 }
<a name="l00744"></a>00744                                 sscanf(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(node), <span class="stringliteral">&quot;%f&quot;</span>, &amp;value);
<a name="l00745"></a>00745                                 <span class="keywordflow">return</span> createFloatValueObject(value);
<a name="l00746"></a>00746                         }
<a name="l00747"></a>00747         }
<a name="l00748"></a>00748         fprintf(stderr, <span class="stringliteral">&quot;Unknown value type encountered during floating point decimal cast\n&quot;</span>);
<a name="l00749"></a>00749         <span class="keywordflow">return</span> NULL;
<a name="l00750"></a>00750 }
<a name="l00751"></a>00751 
<a name="l00774"></a><a class="code" href="interpreter_8h.html#a392cb43c47522cc46d70df0f673b73f6">00774</a> <a class="code" href="struct_value_object.html">ValueObject</a> *castStringExplicit(<a class="code" href="struct_value_object.html">ValueObject</a> *node,  
<a name="l00775"></a>00775                                 <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l00776"></a>00776 {
<a name="l00777"></a>00777         <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span> NULL;
<a name="l00778"></a>00778         <span class="keywordflow">switch</span> (node-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>) {
<a name="l00779"></a>00779                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a523067b7870725372ce9aa1399a8abba">VT_NIL</a>: {
<a name="l00780"></a>00780                         <span class="keywordtype">char</span> *str = createString(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00781"></a>00781                         <span class="keywordflow">if</span> (!str) <span class="keywordflow">return</span> NULL;
<a name="l00782"></a>00782                         <span class="keywordflow">return</span> createStringValueObject(str);
<a name="l00783"></a>00783                 }
<a name="l00784"></a>00784                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a>: {
<a name="l00787"></a>00787                         fprintf(stderr, <span class="stringliteral">&quot;Cannot cast TROOF to YARN\n&quot;</span>);
<a name="l00788"></a>00788                         <span class="keywordflow">return</span> NULL;
<a name="l00789"></a>00789                 }
<a name="l00790"></a>00790                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>: {
<a name="l00791"></a>00791                         <span class="keywordtype">char</span> *data = NULL;
<a name="l00792"></a>00792                         <span class="comment">/* One character per integer bit plus one more for the</span>
<a name="l00793"></a>00793 <span class="comment">                         * null character */</span>
<a name="l00794"></a>00794                         <span class="keywordtype">size_t</span> size = <span class="keyword">sizeof</span>(int) * 8 + 1;
<a name="l00795"></a>00795                         data = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * size);
<a name="l00796"></a>00796                         <span class="keywordflow">if</span> (!data) <span class="keywordflow">return</span> NULL;
<a name="l00797"></a>00797                         sprintf(data, <span class="stringliteral">&quot;%i&quot;</span>, <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(node));
<a name="l00798"></a>00798                         <span class="keywordflow">return</span> createStringValueObject(data);
<a name="l00799"></a>00799                 }
<a name="l00800"></a>00800                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a361c0d0ff5ba71f4ddd9633d3f79635f">VT_FLOAT</a>: {
<a name="l00801"></a>00801                         <span class="keywordtype">char</span> *data = NULL;
<a name="l00802"></a>00802                         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> precision = 2;
<a name="l00803"></a>00803                         <span class="comment">/* One character per float bit plus one more for the</span>
<a name="l00804"></a>00804 <span class="comment">                         * null character */</span>
<a name="l00805"></a>00805                         <span class="keywordtype">size_t</span> size = <span class="keyword">sizeof</span>(float) * 8 + 1;
<a name="l00806"></a>00806                         data = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * size);
<a name="l00807"></a>00807                         <span class="keywordflow">if</span> (!data) <span class="keywordflow">return</span> NULL;
<a name="l00808"></a>00808                         sprintf(data, <span class="stringliteral">&quot;%f&quot;</span>, <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(node));
<a name="l00809"></a>00809                         <span class="comment">/* Truncate to a certain number of decimal places */</span>
<a name="l00810"></a>00810                         strchr(data, <span class="charliteral">&#39;.&#39;</span>)[precision + 1] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00811"></a>00811                         <span class="keywordflow">return</span> createStringValueObject(data);
<a name="l00812"></a>00812                 }
<a name="l00813"></a>00813                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a7d0ada66d85d8eb695f3bdd2e48b5976">VT_STRING</a>: {
<a name="l00814"></a>00814                         <span class="keywordtype">char</span> *temp = NULL;
<a name="l00815"></a>00815                         <span class="keywordtype">char</span> *data = NULL;
<a name="l00816"></a>00816                         <span class="keywordtype">char</span> *str = <a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(node);
<a name="l00817"></a>00817                         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> a, b, size;
<a name="l00818"></a>00818                         <span class="comment">/* Perform interpolation */</span>
<a name="l00819"></a>00819                         size = strlen(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(node)) + 1;
<a name="l00820"></a>00820                         temp = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * size);
<a name="l00821"></a>00821                         <span class="keywordflow">for</span> (a = 0, b = 0; str[b] != <span class="charliteral">&#39;\0&#39;</span>; ) {
<a name="l00822"></a>00822                                 <span class="keywordflow">if</span> (!strncmp(str + b, <span class="stringliteral">&quot;:)&quot;</span>, 2)) {
<a name="l00823"></a>00823                                         temp[a] = <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00824"></a>00824                                         a++, b += 2;
<a name="l00825"></a>00825                                 }
<a name="l00826"></a>00826                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(str + b, <span class="stringliteral">&quot;:&gt;&quot;</span>, 2)) {
<a name="l00827"></a>00827                                         temp[a] = <span class="charliteral">&#39;\t&#39;</span>;
<a name="l00828"></a>00828                                         a++, b += 2;
<a name="l00829"></a>00829                                 }
<a name="l00830"></a>00830                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(str + b, <span class="stringliteral">&quot;:o&quot;</span>, 2)) {
<a name="l00831"></a>00831                                         temp[a] = <span class="charliteral">&#39;\a&#39;</span>;
<a name="l00832"></a>00832                                         a++, b += 2;
<a name="l00833"></a>00833                                 }
<a name="l00834"></a>00834                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(str + b, <span class="stringliteral">&quot;:\&quot;&quot;</span>, 2)) {
<a name="l00835"></a>00835                                         temp[a] = <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l00836"></a>00836                                         a++, b += 2;
<a name="l00837"></a>00837                                 }
<a name="l00838"></a>00838                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(str + b, <span class="stringliteral">&quot;::&quot;</span>, 2)) {
<a name="l00839"></a>00839                                         temp[a] = <span class="charliteral">&#39;:&#39;</span>;
<a name="l00840"></a>00840                                         a++, b += 2;
<a name="l00841"></a>00841                                 }
<a name="l00842"></a>00842                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(str + b, <span class="stringliteral">&quot;:(&quot;</span>, 2)) {
<a name="l00843"></a>00843                                         <span class="keyword">const</span> <span class="keywordtype">char</span> *start = str + b + 2;
<a name="l00844"></a>00844                                         <span class="keyword">const</span> <span class="keywordtype">char</span> *end = strchr(start, <span class="charliteral">&#39;)&#39;</span>);
<a name="l00845"></a>00845                                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> len = end - start;
<a name="l00846"></a>00846                                         <span class="keywordtype">char</span> *image = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * (len + 1));
<a name="l00847"></a>00847                                         <span class="keywordtype">long</span> codepoint;
<a name="l00848"></a>00848                                         <span class="keywordtype">char</span> out[3];
<a name="l00849"></a>00849                                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> num;
<a name="l00850"></a>00850                                         <span class="keywordtype">void</span> *mem = NULL;
<a name="l00851"></a>00851                                         strncpy(image, start, len);
<a name="l00852"></a>00852                                         image[len] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00853"></a>00853                                         <span class="keywordflow">if</span> (!isHexString(image)) {
<a name="l00854"></a>00854                                                 fprintf(stderr, <span class="stringliteral">&quot;Please supply a valid hexadecimal number\n&quot;</span>);
<a name="l00855"></a>00855                                                 free(temp);
<a name="l00856"></a>00856                                                 free(image);
<a name="l00857"></a>00857                                                 <span class="keywordflow">return</span> NULL;
<a name="l00858"></a>00858                                         }
<a name="l00859"></a>00859                                         codepoint = strtol(image, NULL, 16);
<a name="l00860"></a>00860                                         free(image);
<a name="l00861"></a>00861                                         num = convertCodePointToUTF8(codepoint, out);
<a name="l00862"></a>00862                                         <span class="keywordflow">if</span> (num == 0) {
<a name="l00863"></a>00863                                                 free(temp);
<a name="l00864"></a>00864                                                 <span class="keywordflow">return</span> NULL;
<a name="l00865"></a>00865                                         }
<a name="l00866"></a>00866                                         size += num;
<a name="l00867"></a>00867                                         mem = realloc(temp, size);
<a name="l00868"></a>00868                                         <span class="keywordflow">if</span> (!mem) {
<a name="l00869"></a>00869                                                 perror(<span class="stringliteral">&quot;realloc&quot;</span>);
<a name="l00870"></a>00870                                                 free(temp);
<a name="l00871"></a>00871                                                 <span class="keywordflow">return</span> NULL;
<a name="l00872"></a>00872                                         }
<a name="l00873"></a>00873                                         temp = mem;
<a name="l00874"></a>00874                                         strncpy(temp + a, out, num);
<a name="l00875"></a>00875                                         a += num, b += len + 3;
<a name="l00876"></a>00876                                 }
<a name="l00877"></a>00877                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(str + b, <span class="stringliteral">&quot;:[&quot;</span>, 2)) {
<a name="l00878"></a>00878                                         <span class="keyword">const</span> <span class="keywordtype">char</span> *start = str + b + 2;
<a name="l00879"></a>00879                                         <span class="keyword">const</span> <span class="keywordtype">char</span> *end = strchr(start, <span class="charliteral">&#39;]&#39;</span>);
<a name="l00880"></a>00880                                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> len = end - start;
<a name="l00881"></a>00881                                         <span class="keywordtype">char</span> *image = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * (len + 1));
<a name="l00882"></a>00882                                         <span class="keywordtype">long</span> codepoint;
<a name="l00883"></a>00883                                         <span class="keywordtype">char</span> out[3];
<a name="l00884"></a>00884                                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> num;
<a name="l00885"></a>00885                                         <span class="keywordtype">void</span> *mem = NULL;
<a name="l00886"></a>00886                                         strncpy(image, start, len);
<a name="l00887"></a>00887                                         strncpy(image, start, len);
<a name="l00888"></a>00888                                         image[len] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00889"></a>00889                                         codepoint = convertNormativeNameToCodePoint(image);
<a name="l00890"></a>00890                                         free(image);
<a name="l00891"></a>00891                                         <span class="keywordflow">if</span> (codepoint &lt; 0) {
<a name="l00892"></a>00892                                                 free(temp);
<a name="l00893"></a>00893                                                 <span class="keywordflow">return</span> NULL;
<a name="l00894"></a>00894                                         }
<a name="l00895"></a>00895                                         num = convertCodePointToUTF8(codepoint, out);
<a name="l00896"></a>00896                                         size += num;
<a name="l00897"></a>00897                                         mem = realloc(temp, size);
<a name="l00898"></a>00898                                         <span class="keywordflow">if</span> (!mem) {
<a name="l00899"></a>00899                                                 perror(<span class="stringliteral">&quot;realloc&quot;</span>);
<a name="l00900"></a>00900                                                 free(temp);
<a name="l00901"></a>00901                                                 <span class="keywordflow">return</span> NULL;
<a name="l00902"></a>00902                                         }
<a name="l00903"></a>00903                                         temp = mem;
<a name="l00904"></a>00904                                         strncpy(temp + a, out, num);
<a name="l00905"></a>00905                                         a += num, b += len + 3;
<a name="l00906"></a>00906                                 }
<a name="l00907"></a>00907                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(str + b, <span class="stringliteral">&quot;:{&quot;</span>, 2)) {
<a name="l00908"></a>00908                                         <a class="code" href="struct_identifier_node.html">IdentifierNode</a> *target = NULL;
<a name="l00909"></a>00909                                         <a class="code" href="struct_value_object.html">ValueObject</a> *val = NULL, *use = NULL;
<a name="l00910"></a>00910                                         <span class="comment">/* Copy the variable name into image */</span>
<a name="l00911"></a>00911                                         <span class="keyword">const</span> <span class="keywordtype">char</span> *start = str + b + 2;
<a name="l00912"></a>00912                                         <span class="keyword">const</span> <span class="keywordtype">char</span> *end = strchr(start, <span class="charliteral">&#39;}&#39;</span>);
<a name="l00913"></a>00913                                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> len = end - start;
<a name="l00914"></a>00914                                         <span class="keywordtype">char</span> *image = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * (len + 1));
<a name="l00915"></a>00915                                         <span class="keywordtype">void</span> *mem = NULL;
<a name="l00916"></a>00916                                         strncpy(image, start, len);
<a name="l00917"></a>00917                                         image[len] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00918"></a>00918                                         <span class="keywordflow">if</span> (!strcmp(image, <span class="stringliteral">&quot;IT&quot;</span>))
<a name="l00919"></a>00919                                                 <span class="comment">/* Lookup implicit variable */</span>
<a name="l00920"></a>00920                                                 val = scope-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a>;
<a name="l00921"></a>00921                                         <span class="keywordflow">else</span> {
<a name="l00922"></a>00922                                                 <span class="comment">/* Create a new IdentifierNode</span>
<a name="l00923"></a>00923 <span class="comment">                                                 * structure and lookup its</span>
<a name="l00924"></a>00924 <span class="comment">                                                 * value */</span>
<a name="l00925"></a>00925                                                 target = createIdentifierNode(image, NULL, 0);
<a name="l00926"></a>00926                                                 <span class="keywordflow">if</span> (!target) {
<a name="l00927"></a>00927                                                         free(temp);
<a name="l00928"></a>00928                                                         <span class="keywordflow">return</span> NULL;
<a name="l00929"></a>00929                                                 }
<a name="l00930"></a>00930                                                 val = getScopeValue(scope, target);
<a name="l00931"></a>00931                                                 <span class="keywordflow">if</span> (!val) {
<a name="l00932"></a>00932                                                         fprintf(stderr, <span class="stringliteral">&quot;Variable does not exist at: %s\n&quot;</span>, image);
<a name="l00933"></a>00933                                                         deleteIdentifierNode(target);
<a name="l00934"></a>00934                                                         free(temp);
<a name="l00935"></a>00935                                                         <span class="keywordflow">return</span> NULL;
<a name="l00936"></a>00936                                                 }
<a name="l00937"></a>00937                                                 deleteIdentifierNode(target);
<a name="l00938"></a>00938                                         }
<a name="l00939"></a>00939                                         <span class="comment">/* Cast the variable value to a string */</span>
<a name="l00940"></a>00940                                         <span class="keywordflow">if</span> (!(use = castStringImplicit(val, scope))) {
<a name="l00941"></a>00941                                                 free(temp);
<a name="l00942"></a>00942                                                 <span class="keywordflow">return</span> NULL;
<a name="l00943"></a>00943                                         }
<a name="l00944"></a>00944                                         <span class="comment">/* Update the size of the new string */</span>
<a name="l00945"></a>00945                                         size += strlen(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(use));
<a name="l00946"></a>00946                                         mem = realloc(temp, size);
<a name="l00947"></a>00947                                         <span class="keywordflow">if</span> (!mem) {
<a name="l00948"></a>00948                                                 perror(<span class="stringliteral">&quot;realloc&quot;</span>);
<a name="l00949"></a>00949                                                 free(temp);
<a name="l00950"></a>00950                                         }
<a name="l00951"></a>00951                                         temp = mem;
<a name="l00952"></a>00952                                         <span class="comment">/* Copy the variable string into the new string */</span>
<a name="l00953"></a>00953                                         strcpy(temp + a, <a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(use));
<a name="l00954"></a>00954                                         a += strlen(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(use)), b += len + 3;
<a name="l00955"></a>00955                                         deleteValueObject(use);
<a name="l00956"></a>00956                                 }
<a name="l00957"></a>00957                                 <span class="keywordflow">else</span> {
<a name="l00958"></a>00958                                         temp[a] = str[b];
<a name="l00959"></a>00959                                         a++, b++;
<a name="l00960"></a>00960                                 }
<a name="l00961"></a>00961                         }
<a name="l00962"></a>00962                         temp[a] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00963"></a>00963                         data = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * (strlen(temp) + 1));
<a name="l00964"></a>00964                         strcpy(data, temp);
<a name="l00965"></a>00965                         free(temp);
<a name="l00966"></a>00966                         <span class="keywordflow">return</span> createStringValueObject(data);
<a name="l00967"></a>00967                 }
<a name="l00968"></a>00968         }
<a name="l00969"></a>00969         fprintf(stderr, <span class="stringliteral">&quot;Unknown value type encountered during string cast\n&quot;</span>);
<a name="l00970"></a>00970         <span class="keywordflow">return</span> NULL;
<a name="l00971"></a>00971 }
<a name="l00972"></a>00972 
<a name="l00992"></a><a class="code" href="interpreter_8h.html#a27cedbf17b05209dea5559a175309a14">00992</a> <a class="code" href="struct_value_object.html">ValueObject</a> *interpretImpVarExprNode(<a class="code" href="struct_expr_node.html">ExprNode</a> *node,     
<a name="l00993"></a>00993                                      <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l00994"></a>00994 {
<a name="l00995"></a>00995         node = NULL;
<a name="l00996"></a>00996         <span class="keywordflow">return</span> scope-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a>;
<a name="l00997"></a>00997 }
<a name="l00998"></a>00998 
<a name="l01017"></a><a class="code" href="interpreter_8h.html#a8836d5dd711beb5cd96336fe51cdc185">01017</a> <a class="code" href="struct_value_object.html">ValueObject</a> *interpretCastExprNode(<a class="code" href="struct_expr_node.html">ExprNode</a> *node,     
<a name="l01018"></a>01018                                    <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l01019"></a>01019 {
<a name="l01020"></a>01020         <a class="code" href="struct_cast_expr_node.html">CastExprNode</a> *expr = (<a class="code" href="struct_cast_expr_node.html">CastExprNode</a> *)node-&gt;<a class="code" href="struct_expr_node.html#a2c6ff3dccfa2e543a46e01763adab3a8">expr</a>;
<a name="l01021"></a>01021         <a class="code" href="struct_value_object.html">ValueObject</a> *val = interpretExprNode(expr-&gt;<a class="code" href="struct_cast_expr_node.html#a90d1ac82b5b4a63a6842fc4e33f4e3bb">target</a>, scope);
<a name="l01022"></a>01022         <a class="code" href="struct_value_object.html">ValueObject</a> *ret = NULL;
<a name="l01023"></a>01023         <span class="keywordflow">if</span> (!val) <span class="keywordflow">return</span> NULL;
<a name="l01024"></a>01024         <span class="keywordflow">switch</span>(expr-&gt;<a class="code" href="struct_cast_expr_node.html#a0198b8265e221f2a52609a2d117585ef">newtype</a>-&gt;<a class="code" href="struct_type_node.html#abd5fc196a6f39c15eb33e94eec269ac7">type</a>) {
<a name="l01025"></a>01025                 <span class="keywordflow">case</span> CT_NIL:
<a name="l01026"></a>01026                         deleteValueObject(val);
<a name="l01027"></a>01027                         <span class="keywordflow">return</span> createNilValueObject();
<a name="l01028"></a>01028                 <span class="keywordflow">case</span> CT_BOOLEAN:
<a name="l01029"></a>01029                         ret = castBooleanExplicit(val, scope);
<a name="l01030"></a>01030                         deleteValueObject(val);
<a name="l01031"></a>01031                         <span class="keywordflow">return</span> ret;
<a name="l01032"></a>01032                 <span class="keywordflow">case</span> CT_INTEGER:
<a name="l01033"></a>01033                         ret = castIntegerExplicit(val, scope);
<a name="l01034"></a>01034                         deleteValueObject(val);
<a name="l01035"></a>01035                         <span class="keywordflow">return</span> ret;
<a name="l01036"></a>01036                 <span class="keywordflow">case</span> CT_FLOAT:
<a name="l01037"></a>01037                         ret = castFloatExplicit(val, scope);
<a name="l01038"></a>01038                         deleteValueObject(val);
<a name="l01039"></a>01039                         <span class="keywordflow">return</span> ret;
<a name="l01040"></a>01040                 <span class="keywordflow">case</span> CT_STRING:
<a name="l01041"></a>01041                         ret = castStringExplicit(val, scope);
<a name="l01042"></a>01042                         deleteValueObject(val);
<a name="l01043"></a>01043                         <span class="keywordflow">return</span> ret;
<a name="l01044"></a>01044                 <span class="keywordflow">default</span>:
<a name="l01045"></a>01045                         fprintf(stderr, <span class="stringliteral">&quot;Unknown cast type\n&quot;</span>);
<a name="l01046"></a>01046                         deleteValueObject(val);
<a name="l01047"></a>01047                         <span class="keywordflow">return</span> NULL;
<a name="l01048"></a>01048         }
<a name="l01049"></a>01049 }
<a name="l01050"></a>01050 
<a name="l01069"></a><a class="code" href="interpreter_8h.html#aeacd50079f0ce4daf99a11f922182c08">01069</a> <a class="code" href="struct_value_object.html">ValueObject</a> *interpretFuncCallExprNode(<a class="code" href="struct_expr_node.html">ExprNode</a> *node,     
<a name="l01070"></a>01070                                        <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l01071"></a>01071 {
<a name="l01072"></a>01072         <a class="code" href="struct_func_call_expr_node.html">FuncCallExprNode</a> *expr = (<a class="code" href="struct_func_call_expr_node.html">FuncCallExprNode</a> *)node-&gt;<a class="code" href="struct_expr_node.html#a2c6ff3dccfa2e543a46e01763adab3a8">expr</a>;
<a name="l01073"></a>01073         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l01074"></a>01074         <a class="code" href="structscopeobject.html">ScopeObject</a> *outer = createScopeObject(scope);
<a name="l01075"></a>01075         <a class="code" href="struct_return_object.html">ReturnObject</a> *retval = NULL;
<a name="l01076"></a>01076         <a class="code" href="struct_value_object.html">ValueObject</a> *ret = NULL;
<a name="l01077"></a>01077         <span class="keywordflow">if</span> (!outer) <span class="keywordflow">return</span> NULL;
<a name="l01078"></a>01078         <span class="keywordflow">for</span> (n = 0; n &lt; expr-&gt;<a class="code" href="struct_func_call_expr_node.html#aa2a85cf9427647c0e922221095c00e94">def</a>-&gt;<a class="code" href="struct_func_def_stmt_node.html#a2a9f4d580b7252e5576873d2252a187a">args</a>-&gt;<a class="code" href="struct_identifier_node_list.html#a7ee19db1c4e05eafe5df277542e01dd1">num</a>; n++) {
<a name="l01079"></a>01079                 <a class="code" href="struct_value_object.html">ValueObject</a> *val = NULL;
<a name="l01080"></a>01080                 <span class="keywordflow">if</span> (!createScopeValue(outer, expr-&gt;<a class="code" href="struct_func_call_expr_node.html#aa2a85cf9427647c0e922221095c00e94">def</a>-&gt;<a class="code" href="struct_func_def_stmt_node.html#a2a9f4d580b7252e5576873d2252a187a">args</a>-&gt;<a class="code" href="struct_identifier_node_list.html#a61b371619c07f89846ae0780d5403dc0">ids</a>[n])) {
<a name="l01081"></a>01081                         deleteScopeObject(outer);
<a name="l01082"></a>01082                         <span class="keywordflow">return</span> NULL;
<a name="l01083"></a>01083                 }
<a name="l01084"></a>01084                 <span class="keywordflow">if</span> (!(val = interpretExprNode(expr-&gt;<a class="code" href="struct_func_call_expr_node.html#a559b2108d83b11b46584b85f6fd1b12b">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a10ae95f2facec652ba79e0bb5c9298c1">exprs</a>[n], scope))) {
<a name="l01085"></a>01085                         deleteScopeObject(outer);
<a name="l01086"></a>01086                         <span class="keywordflow">return</span> NULL;
<a name="l01087"></a>01087                 }
<a name="l01088"></a>01088                 <span class="keywordflow">if</span> (!updateScopeValue(outer, expr-&gt;<a class="code" href="struct_func_call_expr_node.html#aa2a85cf9427647c0e922221095c00e94">def</a>-&gt;<a class="code" href="struct_func_def_stmt_node.html#a2a9f4d580b7252e5576873d2252a187a">args</a>-&gt;<a class="code" href="struct_identifier_node_list.html#a61b371619c07f89846ae0780d5403dc0">ids</a>[n], val)) {
<a name="l01089"></a>01089                         deleteScopeObject(outer);
<a name="l01090"></a>01090                         deleteValueObject(val);
<a name="l01091"></a>01091                         <span class="keywordflow">return</span> NULL;
<a name="l01092"></a>01092                 }
<a name="l01093"></a>01093         }
<a name="l01094"></a>01094         <span class="comment">/* \note We use interpretStmtNodeList(StmtNodeList *, ScopeObject *)</span>
<a name="l01095"></a>01095 <span class="comment">         *       here because we want to have access to the function&#39;s ScopeObject</span>
<a name="l01096"></a>01096 <span class="comment">         *       as we may need to retrieve the implicit variable in the case of</span>
<a name="l01097"></a>01097 <span class="comment">         *       a default return. */</span>
<a name="l01098"></a>01098         <span class="keywordflow">if</span> (!(retval = interpretStmtNodeList(expr-&gt;<a class="code" href="struct_func_call_expr_node.html#aa2a85cf9427647c0e922221095c00e94">def</a>-&gt;<a class="code" href="struct_func_def_stmt_node.html#a9e50b6a41f7abe43b433fe4fd714b002">body</a>-&gt;<a class="code" href="struct_block_node.html#a5d918092ee6d41f6be62dff435aede89">stmts</a>, outer))) {
<a name="l01099"></a>01099                 deleteScopeObject(outer);
<a name="l01100"></a>01100                 <span class="keywordflow">return</span> NULL;
<a name="l01101"></a>01101         }
<a name="l01102"></a>01102         <span class="keywordflow">switch</span> (retval-&gt;<a class="code" href="struct_return_object.html#a79da4f77fc9fa5dfeefbd750b0caddb0">type</a>) {
<a name="l01103"></a>01103                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cca5799e236aeee53b6fe285dc67cb42f00">RT_DEFAULT</a>:
<a name="l01104"></a>01104                         <span class="comment">/* Extract return value */</span>
<a name="l01105"></a>01105                         ret = outer-&gt;impvar;
<a name="l01106"></a>01106                         outer-&gt;impvar = NULL;
<a name="l01107"></a>01107                         <span class="keywordflow">break</span>;
<a name="l01108"></a>01108                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccaa22f8c8892450d4ee8806a80a7e12b64">RT_BREAK</a>:
<a name="l01109"></a>01109                         ret = createNilValueObject();
<a name="l01110"></a>01110                         <span class="keywordflow">break</span>;
<a name="l01111"></a>01111                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccae089a7a50c323705d8c848d0308ca41b">RT_RETURN</a>:
<a name="l01112"></a>01112                         <span class="comment">/* Extract return value */</span>
<a name="l01113"></a>01113                         ret = retval-&gt;<a class="code" href="struct_return_object.html#a52bd553a4949e0f49f377778402e2cbe">value</a>;
<a name="l01114"></a>01114                         retval-&gt;<a class="code" href="struct_return_object.html#a52bd553a4949e0f49f377778402e2cbe">value</a> = NULL;
<a name="l01115"></a>01115                         <span class="keywordflow">break</span>;
<a name="l01116"></a>01116                 <span class="keywordflow">default</span>:
<a name="l01117"></a>01117                         fprintf(stderr, <span class="stringliteral">&quot;Invalid return type\n&quot;</span>);
<a name="l01118"></a>01118                         <span class="keywordflow">break</span>;
<a name="l01119"></a>01119         }
<a name="l01120"></a>01120         deleteReturnObject(retval);
<a name="l01121"></a>01121         deleteScopeObject(outer);
<a name="l01122"></a>01122         <span class="keywordflow">return</span> ret;
<a name="l01123"></a>01123 }
<a name="l01124"></a>01124 
<a name="l01147"></a><a class="code" href="interpreter_8h.html#a0f42bf997323efdae806c0bcf1c554d8">01147</a> <a class="code" href="struct_value_object.html">ValueObject</a> *interpretIdentifierExprNode(<a class="code" href="struct_expr_node.html">ExprNode</a> *node,     
<a name="l01148"></a>01148                                          <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l01149"></a>01149 {
<a name="l01150"></a>01150         <a class="code" href="struct_value_object.html">ValueObject</a> *val = getScopeValue(scope, node-&gt;<a class="code" href="struct_expr_node.html#a2c6ff3dccfa2e543a46e01763adab3a8">expr</a>);
<a name="l01151"></a>01151         <span class="keywordflow">if</span> (!val) {
<a name="l01152"></a>01152                 <a class="code" href="struct_identifier_node.html">IdentifierNode</a> *<span class="keywordtype">id</span> = (<a class="code" href="struct_identifier_node.html">IdentifierNode</a> *)(node-&gt;<a class="code" href="struct_expr_node.html#a2c6ff3dccfa2e543a46e01763adab3a8">expr</a>);
<a name="l01153"></a>01153                 fprintf(stderr, <span class="stringliteral">&quot;%s:%d: variable does not exist at: %s\n&quot;</span>, id-&gt;<a class="code" href="struct_identifier_node.html#a3e2e04a380b98e30c1227ae747edbe18">fname</a>, id-&gt;<a class="code" href="struct_identifier_node.html#a64ed52f14bcfabff321d105e0a54648d">line</a>, id-&gt;<a class="code" href="struct_identifier_node.html#a3e2473c7676f22d1f3beebe66f0a7688">image</a>);
<a name="l01154"></a>01154                 <span class="keywordflow">return</span> NULL;
<a name="l01155"></a>01155         }
<a name="l01156"></a>01156         <span class="keywordflow">return</span> copyValueObject(val);
<a name="l01157"></a>01157 }
<a name="l01158"></a>01158 
<a name="l01182"></a><a class="code" href="interpreter_8h.html#ad561e8b2aa21983e94b838f30337f099">01182</a> <a class="code" href="struct_value_object.html">ValueObject</a> *interpretConstantExprNode(<a class="code" href="struct_expr_node.html">ExprNode</a> *node,     
<a name="l01183"></a>01183                                        <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l01184"></a>01184 {
<a name="l01185"></a>01185         <a class="code" href="struct_constant_node.html">ConstantNode</a> *expr = (<a class="code" href="struct_constant_node.html">ConstantNode</a> *)node-&gt;<a class="code" href="struct_expr_node.html#a2c6ff3dccfa2e543a46e01763adab3a8">expr</a>;
<a name="l01186"></a>01186         scope = NULL;
<a name="l01187"></a>01187         switch (expr-&gt;<a class="code" href="struct_constant_node.html#ae0c5b58398f2ff9a476628ea34858893">type</a>) {
<a name="l01188"></a>01188                 <span class="keywordflow">case</span> CT_NIL:
<a name="l01189"></a>01189                         <span class="keywordflow">return</span> createNilValueObject();
<a name="l01190"></a>01190                 <span class="keywordflow">case</span> CT_BOOLEAN:
<a name="l01191"></a>01191                         <span class="keywordflow">return</span> createBooleanValueObject(expr-&gt;<a class="code" href="struct_constant_node.html#ae546bb49962906e06a965381014ea7ae">data</a>.<a class="code" href="union_constant_data.html#a2bd6e6fb99485a02c81794d2a3fc5a41">i</a>);
<a name="l01192"></a>01192                 <span class="keywordflow">case</span> CT_INTEGER:
<a name="l01193"></a>01193                         <span class="keywordflow">return</span> createIntegerValueObject(expr-&gt;<a class="code" href="struct_constant_node.html#ae546bb49962906e06a965381014ea7ae">data</a>.<a class="code" href="union_constant_data.html#a2bd6e6fb99485a02c81794d2a3fc5a41">i</a>);
<a name="l01194"></a>01194                 <span class="keywordflow">case</span> CT_FLOAT:
<a name="l01195"></a>01195                         <span class="keywordflow">return</span> createFloatValueObject(expr-&gt;<a class="code" href="struct_constant_node.html#ae546bb49962906e06a965381014ea7ae">data</a>.<a class="code" href="union_constant_data.html#a9c3282f50d2b4fb9752bb55fed6d1ed2">f</a>);
<a name="l01196"></a>01196                 <span class="keywordflow">case</span> CT_STRING: {
<a name="l01200"></a>01200                         <span class="keywordtype">char</span> *str = createString(expr-&gt;<a class="code" href="struct_constant_node.html#ae546bb49962906e06a965381014ea7ae">data</a>.<a class="code" href="union_constant_data.html#aee1ab22b8dd076717f5de146f8939b46">s</a>);
<a name="l01201"></a>01201                         <span class="keywordflow">if</span> (!str) <span class="keywordflow">return</span> NULL;
<a name="l01202"></a>01202                         <span class="keywordflow">return</span> createStringValueObject(str);
<a name="l01203"></a>01203                 }
<a name="l01204"></a>01204                 <span class="keywordflow">default</span>:
<a name="l01205"></a>01205                         fprintf(stderr, <span class="stringliteral">&quot;Unknown constant type\n&quot;</span>);
<a name="l01206"></a>01206                         <span class="keywordflow">return</span> NULL;
<a name="l01207"></a>01207         }
<a name="l01208"></a>01208 }
<a name="l01209"></a>01209 
<a name="l01230"></a><a class="code" href="interpreter_8h.html#a7795828f9fd573ff3670ade6f6955b07">01230</a> <a class="code" href="struct_value_object.html">ValueObject</a> *interpretNotOpExprNode(<a class="code" href="struct_op_expr_node.html">OpExprNode</a> *expr,   
<a name="l01231"></a>01231                                     <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l01232"></a>01232 {
<a name="l01233"></a>01233         <a class="code" href="struct_value_object.html">ValueObject</a> *val = interpretExprNode(expr-&gt;<a class="code" href="struct_op_expr_node.html#a82d6f2c460a585ee3b0a46ce00ba186f">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a10ae95f2facec652ba79e0bb5c9298c1">exprs</a>[0], scope);
<a name="l01234"></a>01234         <a class="code" href="struct_value_object.html">ValueObject</a> *use = val;
<a name="l01235"></a>01235         <span class="keywordtype">int</span> retval;
<a name="l01236"></a>01236         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> cast = 0;
<a name="l01237"></a>01237         <span class="keywordflow">if</span> (!val) <span class="keywordflow">return</span> NULL;
<a name="l01238"></a>01238         <span class="keywordflow">if</span> (val-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a> &amp;&amp; val-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>) {
<a name="l01239"></a>01239                 use = castBooleanImplicit(val, scope);
<a name="l01240"></a>01240                 <span class="keywordflow">if</span> (!use) {
<a name="l01241"></a>01241                         deleteValueObject(val);
<a name="l01242"></a>01242                         <span class="keywordflow">return</span> NULL;
<a name="l01243"></a>01243                 }
<a name="l01244"></a>01244                 cast = 1;
<a name="l01245"></a>01245         }
<a name="l01246"></a>01246         retval = <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(use);
<a name="l01247"></a>01247         <span class="keywordflow">if</span> (cast) deleteValueObject(use);
<a name="l01248"></a>01248         deleteValueObject(val);
<a name="l01249"></a>01249         <span class="keywordflow">return</span> createBooleanValueObject(!retval);
<a name="l01250"></a>01250 }
<a name="l01251"></a>01251 
<a name="l01265"></a><a class="code" href="interpreter_8h.html#a60442c44a3ac32b0a98e89294e785c7a">01265</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opAddIntegerInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01266"></a>01266                                  <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01267"></a>01267 {
<a name="l01268"></a>01268         <span class="keywordflow">return</span> createIntegerValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) + <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01269"></a>01269 }
<a name="l01270"></a>01270 
<a name="l01284"></a><a class="code" href="interpreter_8h.html#a40c15754c7035023570c2f6706aa1bce">01284</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opSubIntegerInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01285"></a>01285                                  <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01286"></a>01286 {
<a name="l01287"></a>01287         <span class="keywordflow">return</span> createIntegerValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) - <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01288"></a>01288 }
<a name="l01289"></a>01289 
<a name="l01303"></a><a class="code" href="interpreter_8h.html#a49439f8122d53198698d46dc8e355dec">01303</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opMultIntegerInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01304"></a>01304                                   <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01305"></a>01305 {
<a name="l01306"></a>01306         <span class="keywordflow">return</span> createIntegerValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) * <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01307"></a>01307 }
<a name="l01308"></a>01308 
<a name="l01324"></a><a class="code" href="interpreter_8h.html#a1c2bad8d59cc55d1de2e90818552b727">01324</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opDivIntegerInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01325"></a>01325                                  <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01326"></a>01326 {
<a name="l01327"></a>01327         <span class="keywordflow">if</span> (<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b) == 0) {
<a name="l01328"></a>01328                 fprintf(stderr, <span class="stringliteral">&quot;Division by zero undefined\n&quot;</span>);
<a name="l01329"></a>01329                 <span class="keywordflow">return</span> NULL;
<a name="l01330"></a>01330         }
<a name="l01331"></a>01331         <span class="keywordflow">return</span> createIntegerValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) / <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01332"></a>01332 }
<a name="l01333"></a>01333 
<a name="l01347"></a><a class="code" href="interpreter_8h.html#a60d738376880221327c82bb0bf2de141">01347</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opMaxIntegerInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01348"></a>01348                                  <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01349"></a>01349 {
<a name="l01350"></a>01350         <span class="keywordflow">return</span> createIntegerValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) &gt; <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b) ? <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) : <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01351"></a>01351 }
<a name="l01352"></a>01352 
<a name="l01366"></a><a class="code" href="interpreter_8h.html#af3f2a6f50fdd068834ab1b58d4928ec8">01366</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opMinIntegerInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01367"></a>01367                                  <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01368"></a>01368 {
<a name="l01369"></a>01369         <span class="keywordflow">return</span> createIntegerValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) &lt; <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b) ? <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) : <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01370"></a>01370 }
<a name="l01371"></a>01371 
<a name="l01385"></a><a class="code" href="interpreter_8h.html#a87b62a374250d0fbe4e9e95497c10b15">01385</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opModIntegerInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01386"></a>01386                                  <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01387"></a>01387 {
<a name="l01388"></a>01388         <span class="keywordflow">if</span> (<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b) == 0) {
<a name="l01389"></a>01389                 fprintf(stderr, <span class="stringliteral">&quot;Division by zero undefined\n&quot;</span>);
<a name="l01390"></a>01390                 <span class="keywordflow">return</span> NULL;
<a name="l01391"></a>01391         }
<a name="l01392"></a>01392         <span class="keywordflow">return</span> createIntegerValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) % <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01393"></a>01393 }
<a name="l01394"></a>01394 
<a name="l01409"></a><a class="code" href="interpreter_8h.html#afd694eb2626213010cbc38830a462fde">01409</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opAddIntegerFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01410"></a>01410                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01411"></a>01411 {
<a name="l01412"></a>01412         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) + <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l01413"></a>01413 }
<a name="l01414"></a>01414 
<a name="l01429"></a><a class="code" href="interpreter_8h.html#a305d078f6079ca2938e21409816000be">01429</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opSubIntegerFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01430"></a>01430                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01431"></a>01431 {
<a name="l01432"></a>01432         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) - <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l01433"></a>01433 }
<a name="l01434"></a>01434 
<a name="l01449"></a><a class="code" href="interpreter_8h.html#a5393045000bf05070b764eebe2012627">01449</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opMultIntegerFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01450"></a>01450                                 <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01451"></a>01451 {
<a name="l01452"></a>01452         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) * <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l01453"></a>01453 }
<a name="l01454"></a>01454 
<a name="l01471"></a><a class="code" href="interpreter_8h.html#a0df5be521bfc67b35aca6ab1e30c2a32">01471</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opDivIntegerFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01472"></a>01472                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01473"></a>01473 {
<a name="l01474"></a>01474         <span class="keywordflow">if</span> (<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b) == 0.0) {
<a name="l01475"></a>01475                 fprintf(stderr, <span class="stringliteral">&quot;Division by zero undefined\n&quot;</span>);
<a name="l01476"></a>01476                 <span class="keywordflow">return</span> NULL;
<a name="l01477"></a>01477         }
<a name="l01478"></a>01478         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) / <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l01479"></a>01479 }
<a name="l01480"></a>01480 
<a name="l01495"></a><a class="code" href="interpreter_8h.html#a5d68c3dc91195706810b6db725e62eaa">01495</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opMaxIntegerFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01496"></a>01496                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01497"></a>01497 {
<a name="l01498"></a>01498         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) &gt; <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b) ? <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) : <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l01499"></a>01499 }
<a name="l01500"></a>01500 
<a name="l01515"></a><a class="code" href="interpreter_8h.html#a5693ec134e9b9090f8cfe51d9906e38e">01515</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opMinIntegerFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01516"></a>01516                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01517"></a>01517 {
<a name="l01518"></a>01518         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) &lt; <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b) ? <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) : <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l01519"></a>01519 }
<a name="l01520"></a>01520 
<a name="l01535"></a><a class="code" href="interpreter_8h.html#a6fa3fda306a1df48dfe9fbc2cff75d74">01535</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opModIntegerFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01536"></a>01536                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01537"></a>01537 {
<a name="l01538"></a>01538         <span class="keywordflow">if</span> (<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b) == 0.0) {
<a name="l01539"></a>01539                 fprintf(stderr, <span class="stringliteral">&quot;Division by zero undefined\n&quot;</span>);
<a name="l01540"></a>01540                 <span class="keywordflow">return</span> NULL;
<a name="l01541"></a>01541         }
<a name="l01542"></a>01542         <span class="keywordflow">return</span> createFloatValueObject(fmod(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a), <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b)));
<a name="l01543"></a>01543 }
<a name="l01544"></a>01544 
<a name="l01559"></a><a class="code" href="interpreter_8h.html#a7c2619ce0699c09c53ab2aaf2c0977f7">01559</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opAddFloatInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01560"></a>01560                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01561"></a>01561 {
<a name="l01562"></a>01562         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) + <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01563"></a>01563 }
<a name="l01564"></a>01564 
<a name="l01579"></a><a class="code" href="interpreter_8h.html#a499e486ea1a832b7105d3d8da3b76e91">01579</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opSubFloatInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01580"></a>01580                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01581"></a>01581 {
<a name="l01582"></a>01582         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) - <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01583"></a>01583 }
<a name="l01584"></a>01584  <a class="code" href="struct_value_object.html">ValueObject</a> *opMultFloatInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01599"></a>01599                                 <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01600"></a>01600 {
<a name="l01601"></a>01601         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) * <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01602"></a>01602 }
<a name="l01603"></a>01603 
<a name="l01620"></a><a class="code" href="interpreter_8h.html#a89ec3da04bba6b628f84b131e804e3aa">01620</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opDivFloatInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01621"></a>01621                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01622"></a>01622 {
<a name="l01623"></a>01623         <span class="keywordflow">if</span> (<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b) == 0) {
<a name="l01624"></a>01624                 fprintf(stderr, <span class="stringliteral">&quot;Division by zero undefined\n&quot;</span>);
<a name="l01625"></a>01625                 <span class="keywordflow">return</span> NULL;
<a name="l01626"></a>01626         }
<a name="l01627"></a>01627         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) / <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01628"></a>01628 }
<a name="l01629"></a>01629 
<a name="l01644"></a><a class="code" href="interpreter_8h.html#ae290f0012a6e7ac888f6e42e162db0d1">01644</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opMaxFloatInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01645"></a>01645                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01646"></a>01646 {
<a name="l01647"></a>01647         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) &gt; <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b) ? <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) : <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01648"></a>01648 }
<a name="l01649"></a>01649 
<a name="l01664"></a><a class="code" href="interpreter_8h.html#aeba04e12530543d1ecc8a70669fac094">01664</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opMinFloatInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01665"></a>01665                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01666"></a>01666 {
<a name="l01667"></a>01667         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) &lt; <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b) ? <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) : <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l01668"></a>01668 }
<a name="l01669"></a>01669 
<a name="l01684"></a><a class="code" href="interpreter_8h.html#a6d90cdaea27748de7784f43f82c31c8a">01684</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opModFloatInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01685"></a>01685                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01686"></a>01686 {
<a name="l01687"></a>01687         <span class="keywordflow">if</span> (<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b) == 0) {
<a name="l01688"></a>01688                 fprintf(stderr, <span class="stringliteral">&quot;Division by zero undefined\n&quot;</span>);
<a name="l01689"></a>01689                 <span class="keywordflow">return</span> NULL;
<a name="l01690"></a>01690         }
<a name="l01691"></a>01691         <span class="keywordflow">return</span> createFloatValueObject(fmod(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a), <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b)));
<a name="l01692"></a>01692 }
<a name="l01693"></a>01693 
<a name="l01707"></a><a class="code" href="interpreter_8h.html#ad07ed5a492963cbbfbaf26f10178a0da">01707</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opAddFloatFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01708"></a>01708                              <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01709"></a>01709 {
<a name="l01710"></a>01710         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) + <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l01711"></a>01711 }
<a name="l01712"></a>01712 
<a name="l01726"></a><a class="code" href="interpreter_8h.html#a6fe0baa044b43505a5013455ce7f3ef4">01726</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opSubFloatFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01727"></a>01727                              <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01728"></a>01728 {
<a name="l01729"></a>01729         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) - <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l01730"></a>01730 }
<a name="l01731"></a>01731 
<a name="l01745"></a><a class="code" href="interpreter_8h.html#ab28d564ef0da5903a3a2ed6c18dcad11">01745</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opMultFloatFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01746"></a>01746                               <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01747"></a>01747 {
<a name="l01748"></a>01748         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) * <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l01749"></a>01749 }
<a name="l01750"></a>01750 
<a name="l01766"></a><a class="code" href="interpreter_8h.html#a907454143b8856fe616d3b595cb917d1">01766</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opDivFloatFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01767"></a>01767                              <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01768"></a>01768 {
<a name="l01769"></a>01769         <span class="keywordflow">if</span> (<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b) == 0.0) {
<a name="l01770"></a>01770                 fprintf(stderr, <span class="stringliteral">&quot;Division by zero undefined\n&quot;</span>);
<a name="l01771"></a>01771                 <span class="keywordflow">return</span> NULL;
<a name="l01772"></a>01772         }
<a name="l01773"></a>01773         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) / <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l01774"></a>01774 }
<a name="l01775"></a>01775 
<a name="l01789"></a><a class="code" href="interpreter_8h.html#a744d79a234d2a4f6490ef91624071c32">01789</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opMaxFloatFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01790"></a>01790                              <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01791"></a>01791 {
<a name="l01792"></a>01792         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) &gt; <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b) ? <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) : <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l01793"></a>01793 }
<a name="l01794"></a>01794 
<a name="l01808"></a><a class="code" href="interpreter_8h.html#a901fca3f0217cce10f23a893372680a8">01808</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opMinFloatFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01809"></a>01809                              <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01810"></a>01810 {
<a name="l01811"></a>01811         <span class="keywordflow">return</span> createFloatValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) &lt; <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b) ? <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) : <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l01812"></a>01812 }
<a name="l01813"></a>01813 
<a name="l01827"></a><a class="code" href="interpreter_8h.html#ae7fd86387767d294c071b020ea5e9ccc">01827</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opModFloatFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l01828"></a>01828                              <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l01829"></a>01829 {
<a name="l01830"></a>01830         <span class="keywordflow">if</span> (<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b) == 0.0) {
<a name="l01831"></a>01831                 fprintf(stderr, <span class="stringliteral">&quot;Division by zero undefined\n&quot;</span>);
<a name="l01832"></a>01832                 <span class="keywordflow">return</span> NULL;
<a name="l01833"></a>01833         }
<a name="l01834"></a>01834         <span class="keywordflow">return</span> createFloatValueObject(fmod(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a), <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b)));
<a name="l01835"></a>01835 }
<a name="l01836"></a>01836 
<a name="l01837"></a>01837 <span class="comment">/* A jump table for arithmetic operations.  The first index determines the</span>
<a name="l01838"></a>01838 <span class="comment"> * particular arithmetic operation to parform, the second index determines the</span>
<a name="l01839"></a>01839 <span class="comment"> * type of the first argument, and the third index determines the type of the</span>
<a name="l01840"></a>01840 <span class="comment"> * second object. */</span>
<a name="l01841"></a>01841 <span class="keyword">static</span> <a class="code" href="struct_value_object.html">ValueObject</a> *(*ArithOpJumpTable[7][2][2])(<a class="code" href="struct_value_object.html">ValueObject</a> *, <a class="code" href="struct_value_object.html">ValueObject</a> *) = {
<a name="l01842"></a>01842         { { opAddIntegerInteger, opAddIntegerFloat }, { opAddFloatInteger, opAddFloatFloat } },
<a name="l01843"></a>01843         { { opSubIntegerInteger, opSubIntegerFloat }, { opSubFloatInteger, opSubFloatFloat } },
<a name="l01844"></a>01844         { { opMultIntegerInteger, opMultIntegerFloat }, { opMultFloatInteger, opMultFloatFloat } },
<a name="l01845"></a>01845         { { opDivIntegerInteger, opDivIntegerFloat }, { opDivFloatInteger, opDivFloatFloat } },
<a name="l01846"></a>01846         { { opModIntegerInteger, opModIntegerFloat }, { opModFloatInteger, opModFloatFloat } },
<a name="l01847"></a>01847         { { opMaxIntegerInteger, opMaxIntegerFloat }, { opMaxFloatInteger, opMaxFloatFloat } },
<a name="l01848"></a>01848         { { opMinIntegerInteger, opMinIntegerFloat }, { opMinFloatInteger, opMinFloatFloat } }
<a name="l01849"></a>01849 };
<a name="l01850"></a>01850 
<a name="l01872"></a><a class="code" href="interpreter_8h.html#ac43fd9e88414ff9960db8a442ae9a0e8">01872</a> <a class="code" href="struct_value_object.html">ValueObject</a> *interpretArithOpExprNode(<a class="code" href="struct_op_expr_node.html">OpExprNode</a> *expr,   
<a name="l01873"></a>01873                                       <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l01874"></a>01874 {
<a name="l01875"></a>01875         <a class="code" href="struct_value_object.html">ValueObject</a> *val1 = interpretExprNode(expr-&gt;<a class="code" href="struct_op_expr_node.html#a82d6f2c460a585ee3b0a46ce00ba186f">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a10ae95f2facec652ba79e0bb5c9298c1">exprs</a>[0], scope);
<a name="l01876"></a>01876         <a class="code" href="struct_value_object.html">ValueObject</a> *val2 = interpretExprNode(expr-&gt;<a class="code" href="struct_op_expr_node.html#a82d6f2c460a585ee3b0a46ce00ba186f">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a10ae95f2facec652ba79e0bb5c9298c1">exprs</a>[1], scope);
<a name="l01877"></a>01877         <a class="code" href="struct_value_object.html">ValueObject</a> *use1 = val1;
<a name="l01878"></a>01878         <a class="code" href="struct_value_object.html">ValueObject</a> *use2 = val2;
<a name="l01879"></a>01879         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cast1 = 0;
<a name="l01880"></a>01880         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cast2 = 0;
<a name="l01881"></a>01881         <a class="code" href="struct_value_object.html">ValueObject</a> *ret = NULL;
<a name="l01882"></a>01882         <span class="keywordflow">if</span> (!val1 || !val2) {
<a name="l01883"></a>01883                 deleteValueObject(val1);
<a name="l01884"></a>01884                 deleteValueObject(val2);
<a name="l01885"></a>01885                 <span class="keywordflow">return</span> NULL;
<a name="l01886"></a>01886         }
<a name="l01887"></a>01887         <span class="comment">/* Check if a floating point decimal string and cast */</span>
<a name="l01888"></a>01888         <span class="keywordflow">switch</span> (val1-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>) {
<a name="l01889"></a>01889                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a523067b7870725372ce9aa1399a8abba">VT_NIL</a>:
<a name="l01890"></a>01890                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a>:
<a name="l01891"></a>01891                         use1 = castIntegerImplicit(val1, scope);
<a name="l01892"></a>01892                         <span class="keywordflow">if</span> (!use1) {
<a name="l01893"></a>01893                                 deleteValueObject(val1);
<a name="l01894"></a>01894                                 deleteValueObject(val2);
<a name="l01895"></a>01895                                 <span class="keywordflow">return</span> NULL;
<a name="l01896"></a>01896                         }
<a name="l01897"></a>01897                         cast1 = 1;
<a name="l01898"></a>01898                         <span class="keywordflow">break</span>;
<a name="l01899"></a>01899                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>:
<a name="l01900"></a>01900                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a361c0d0ff5ba71f4ddd9633d3f79635f">VT_FLOAT</a>:
<a name="l01901"></a>01901                         <span class="keywordflow">break</span>;
<a name="l01902"></a>01902                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a7d0ada66d85d8eb695f3bdd2e48b5976">VT_STRING</a>: {
<a name="l01903"></a>01903                         <span class="comment">/* Perform interpolation */</span>
<a name="l01904"></a>01904                         <a class="code" href="struct_value_object.html">ValueObject</a> *interp = castStringExplicit(val1, scope);
<a name="l01905"></a>01905                         <span class="keywordflow">if</span> (!interp) {
<a name="l01906"></a>01906                                 deleteValueObject(val1);
<a name="l01907"></a>01907                                 deleteValueObject(val2);
<a name="l01908"></a>01908                                 <span class="keywordflow">return</span> NULL;
<a name="l01909"></a>01909                         }
<a name="l01910"></a>01910                         <span class="keywordflow">if</span> (strchr(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(interp), <span class="charliteral">&#39;.&#39;</span>))
<a name="l01911"></a>01911                                 use1 = castFloatImplicit(interp, scope);
<a name="l01912"></a>01912                         <span class="keywordflow">else</span>
<a name="l01913"></a>01913                                 use1 = castIntegerImplicit(interp, scope);
<a name="l01914"></a>01914                         deleteValueObject(interp);
<a name="l01915"></a>01915                         <span class="keywordflow">if</span> (!use1) {
<a name="l01916"></a>01916                                 deleteValueObject(val1);
<a name="l01917"></a>01917                                 deleteValueObject(val2);
<a name="l01918"></a>01918                                 <span class="keywordflow">return</span> NULL;
<a name="l01919"></a>01919                         }
<a name="l01920"></a>01920                         cast1 = 1;
<a name="l01921"></a>01921                         <span class="keywordflow">break</span>;
<a name="l01922"></a>01922                 }
<a name="l01923"></a>01923                 <span class="keywordflow">default</span>:
<a name="l01924"></a>01924                         fprintf(stderr, <span class="stringliteral">&quot;Invalid operand type\n&quot;</span>);
<a name="l01925"></a>01925         }
<a name="l01926"></a>01926         <span class="keywordflow">switch</span> (val2-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>) {
<a name="l01927"></a>01927                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a523067b7870725372ce9aa1399a8abba">VT_NIL</a>:
<a name="l01928"></a>01928                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a>:
<a name="l01929"></a>01929                         use2 = castIntegerImplicit(val2, scope);
<a name="l01930"></a>01930                         <span class="keywordflow">if</span> (!use2) {
<a name="l01931"></a>01931                                 deleteValueObject(val1);
<a name="l01932"></a>01932                                 deleteValueObject(val2);
<a name="l01933"></a>01933                                 <span class="keywordflow">if</span> (cast1) deleteValueObject(use1);
<a name="l01934"></a>01934                                 <span class="keywordflow">return</span> NULL;
<a name="l01935"></a>01935                         }
<a name="l01936"></a>01936                         cast2 = 1;
<a name="l01937"></a>01937                         <span class="keywordflow">break</span>;
<a name="l01938"></a>01938                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>:
<a name="l01939"></a>01939                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a361c0d0ff5ba71f4ddd9633d3f79635f">VT_FLOAT</a>:
<a name="l01940"></a>01940                         <span class="keywordflow">break</span>;
<a name="l01941"></a>01941                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a7d0ada66d85d8eb695f3bdd2e48b5976">VT_STRING</a>: {
<a name="l01942"></a>01942                         <span class="comment">/* Perform interpolation */</span>
<a name="l01943"></a>01943                         <a class="code" href="struct_value_object.html">ValueObject</a> *interp = castStringExplicit(val2, scope);
<a name="l01944"></a>01944                         <span class="keywordflow">if</span> (!interp) {
<a name="l01945"></a>01945                                 deleteValueObject(val1);
<a name="l01946"></a>01946                                 deleteValueObject(val2);
<a name="l01947"></a>01947                                 <span class="keywordflow">if</span> (cast1) deleteValueObject(use1);
<a name="l01948"></a>01948                                 <span class="keywordflow">return</span> NULL;
<a name="l01949"></a>01949                         }
<a name="l01950"></a>01950                         <span class="keywordflow">if</span> (strchr(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(interp), <span class="charliteral">&#39;.&#39;</span>))
<a name="l01951"></a>01951                                 use2 = castFloatImplicit(interp, scope);
<a name="l01952"></a>01952                         <span class="keywordflow">else</span>
<a name="l01953"></a>01953                                 use2 = castIntegerImplicit(interp, scope);
<a name="l01954"></a>01954                         deleteValueObject(interp);
<a name="l01955"></a>01955                         <span class="keywordflow">if</span> (!use2) {
<a name="l01956"></a>01956                                 deleteValueObject(val1);
<a name="l01957"></a>01957                                 deleteValueObject(val2);
<a name="l01958"></a>01958                                 <span class="keywordflow">if</span> (cast1) deleteValueObject(use1);
<a name="l01959"></a>01959                                 <span class="keywordflow">return</span> NULL;
<a name="l01960"></a>01960                         }
<a name="l01961"></a>01961                         cast2 = 1;
<a name="l01962"></a>01962                         <span class="keywordflow">break</span>;
<a name="l01963"></a>01963                 }
<a name="l01964"></a>01964                 <span class="keywordflow">default</span>:
<a name="l01965"></a>01965                         fprintf(stderr, <span class="stringliteral">&quot;Invalid operand type\n&quot;</span>);
<a name="l01966"></a>01966         }
<a name="l01967"></a>01967         <span class="comment">/* Do math depending on value types */</span>
<a name="l01968"></a>01968         ret = ArithOpJumpTable[expr-&gt;<a class="code" href="struct_op_expr_node.html#a69ff4baea505db8ed32f4c4027f24ac6">type</a>][use1-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>][use2-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>](use1, use2);
<a name="l01969"></a>01969         <span class="comment">/* Clean up after floating point decimal casts */</span>
<a name="l01970"></a>01970         <span class="keywordflow">if</span> (cast1) deleteValueObject(use1);
<a name="l01971"></a>01971         <span class="keywordflow">if</span> (cast2) deleteValueObject(use2);
<a name="l01972"></a>01972         deleteValueObject(val1);
<a name="l01973"></a>01973         deleteValueObject(val2);
<a name="l01974"></a>01974         <span class="keywordflow">return</span> ret;
<a name="l01975"></a>01975 }
<a name="l01976"></a>01976 
<a name="l01996"></a><a class="code" href="interpreter_8h.html#ad0dc393a1a5f2ef0eb59742fe70f07d1">01996</a> <a class="code" href="struct_value_object.html">ValueObject</a> *interpretBoolOpExprNode(<a class="code" href="struct_op_expr_node.html">OpExprNode</a> *expr,   
<a name="l01997"></a>01997                                      <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l01998"></a>01998 {
<a name="l01999"></a>01999         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l02000"></a>02000         <span class="keywordtype">int</span> acc = 0;
<a name="l02001"></a>02001         <span class="comment">/* Proceed to apply the same operation on the accumulator for the</span>
<a name="l02002"></a>02002 <span class="comment">         * remaining arguments. */</span>
<a name="l02003"></a>02003         <span class="keywordflow">for</span> (n = 0; n &lt; expr-&gt;<a class="code" href="struct_op_expr_node.html#a82d6f2c460a585ee3b0a46ce00ba186f">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a60f9bbe230725287369033df733a2b04">num</a>; n++) {
<a name="l02004"></a>02004                 <a class="code" href="struct_value_object.html">ValueObject</a> *val = interpretExprNode(expr-&gt;<a class="code" href="struct_op_expr_node.html#a82d6f2c460a585ee3b0a46ce00ba186f">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a10ae95f2facec652ba79e0bb5c9298c1">exprs</a>[n], scope);
<a name="l02005"></a>02005                 <a class="code" href="struct_value_object.html">ValueObject</a> *use = val;
<a name="l02006"></a>02006                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> temp;
<a name="l02007"></a>02007                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cast = 0;
<a name="l02008"></a>02008                 <span class="keywordflow">if</span> (!val) <span class="keywordflow">return</span> NULL;
<a name="l02009"></a>02009                 <span class="keywordflow">if</span> (val-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a> &amp;&amp; val-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>) {
<a name="l02010"></a>02010                         use = castBooleanImplicit(val, scope);
<a name="l02011"></a>02011                         <span class="keywordflow">if</span> (!use) {
<a name="l02012"></a>02012                                 deleteValueObject(val);
<a name="l02013"></a>02013                                 <span class="keywordflow">return</span> NULL;
<a name="l02014"></a>02014                         }
<a name="l02015"></a>02015                         cast = 1;
<a name="l02016"></a>02016                 }
<a name="l02017"></a>02017                 temp = <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(use);
<a name="l02018"></a>02018                 <span class="keywordflow">if</span> (cast) deleteValueObject(use);
<a name="l02019"></a>02019                 deleteValueObject(val);
<a name="l02020"></a>02020                 <span class="keywordflow">if</span> (n == 0) acc = temp;
<a name="l02021"></a>02021                 <span class="keywordflow">else</span> {
<a name="l02022"></a>02022                         <span class="keywordflow">switch</span> (expr-&gt;<a class="code" href="struct_op_expr_node.html#a69ff4baea505db8ed32f4c4027f24ac6">type</a>) {
<a name="l02023"></a>02023                                 <span class="keywordflow">case</span> OP_AND:
<a name="l02024"></a>02024                                         acc &amp;= temp;
<a name="l02025"></a>02025                                         <span class="keywordflow">break</span>;
<a name="l02026"></a>02026                                 <span class="keywordflow">case</span> OP_OR:
<a name="l02027"></a>02027                                         acc |= temp;
<a name="l02028"></a>02028                                         <span class="keywordflow">break</span>;
<a name="l02029"></a>02029                                 <span class="keywordflow">case</span> OP_XOR:
<a name="l02030"></a>02030                                         acc ^= temp;
<a name="l02031"></a>02031                                         <span class="keywordflow">break</span>;
<a name="l02032"></a>02032                                 <span class="keywordflow">default</span>:
<a name="l02033"></a>02033                                         fprintf(stderr, <span class="stringliteral">&quot;Invalid boolean operation type\n&quot;</span>);
<a name="l02034"></a>02034                                         <span class="keywordflow">return</span> NULL;
<a name="l02035"></a>02035                         }
<a name="l02036"></a>02036                 }
<a name="l02039"></a>02039                 <span class="keywordflow">if</span> (expr-&gt;<a class="code" href="struct_op_expr_node.html#a69ff4baea505db8ed32f4c4027f24ac6">type</a> == OP_AND &amp;&amp; acc == 0) <span class="keywordflow">break</span>;
<a name="l02040"></a>02040                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (expr-&gt;<a class="code" href="struct_op_expr_node.html#a69ff4baea505db8ed32f4c4027f24ac6">type</a> == OP_OR &amp;&amp; acc == 1) <span class="keywordflow">break</span>;
<a name="l02041"></a>02041         }
<a name="l02042"></a>02042         <span class="keywordflow">return</span> createBooleanValueObject(acc);
<a name="l02043"></a>02043 }
<a name="l02044"></a>02044 
<a name="l02053"></a><a class="code" href="interpreter_8h.html#af02dbffb1883def8d565b324d3b08fa4">02053</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opEqIntegerInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02054"></a>02054                                 <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02055"></a>02055 {
<a name="l02056"></a>02056         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) == <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l02057"></a>02057 }
<a name="l02058"></a>02058 
<a name="l02067"></a><a class="code" href="interpreter_8h.html#a737fac56d37cbf193f78775774cfdeeb">02067</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opNeqIntegerInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02068"></a>02068                                  <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02069"></a>02069 {
<a name="l02070"></a>02070         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) != <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l02071"></a>02071 }
<a name="l02072"></a>02072 
<a name="l02082"></a><a class="code" href="interpreter_8h.html#a918c1fe2753f0fa6a7f0abbb0f26790f">02082</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opEqIntegerFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02083"></a>02083                               <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02084"></a>02084 {
<a name="l02085"></a>02085         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) == <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l02086"></a>02086 }
<a name="l02087"></a>02087 
<a name="l02097"></a><a class="code" href="interpreter_8h.html#a689189c68d9b98c49d296cd9f04363e9">02097</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opNeqIntegerFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02098"></a>02098                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02099"></a>02099 {
<a name="l02100"></a>02100         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) != <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l02101"></a>02101 }
<a name="l02102"></a>02102 
<a name="l02112"></a><a class="code" href="interpreter_8h.html#a5b824e009801b5ca65d51abe36aecf97">02112</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opEqFloatInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02113"></a>02113                               <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02114"></a>02114 {
<a name="l02115"></a>02115         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) == <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l02116"></a>02116 }
<a name="l02117"></a>02117 
<a name="l02127"></a><a class="code" href="interpreter_8h.html#a48ab7e79793cd6462d041d6288b770d9">02127</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opNeqFloatInteger(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02128"></a>02128                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02129"></a>02129 {
<a name="l02130"></a>02130         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) != <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l02131"></a>02131 }
<a name="l02132"></a>02132 
<a name="l02141"></a><a class="code" href="interpreter_8h.html#ab721f724a3fac4900c4a8886d57c41d2">02141</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opEqFloatFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02142"></a>02142                             <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02143"></a>02143 {
<a name="l02144"></a>02144         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) == <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l02145"></a>02145 }
<a name="l02146"></a>02146 
<a name="l02155"></a><a class="code" href="interpreter_8h.html#ac2f5e5a62a09a571b8be1ab942fa29cd">02155</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opNeqFloatFloat(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02156"></a>02156                              <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02157"></a>02157 {
<a name="l02158"></a>02158         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(a) != <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(b));
<a name="l02159"></a>02159 }
<a name="l02160"></a>02160 
<a name="l02169"></a><a class="code" href="interpreter_8h.html#a49a410f97c8559f2ba41ca94b7aceb21">02169</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opEqBooleanBoolean(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02170"></a>02170                                 <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02171"></a>02171 {
<a name="l02172"></a>02172         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) == <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l02173"></a>02173 }
<a name="l02174"></a>02174 
<a name="l02183"></a><a class="code" href="interpreter_8h.html#adf2234eccc6099f2f1829a7ee948e045">02183</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opNeqBooleanBoolean(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02184"></a>02184                                  <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02185"></a>02185 {
<a name="l02186"></a>02186         <span class="keywordflow">return</span> createBooleanValueObject(<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(a) != <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(b));
<a name="l02187"></a>02187 }
<a name="l02188"></a>02188 
<a name="l02197"></a><a class="code" href="interpreter_8h.html#a990ba01ec898389b6bde8471e2ad0f9d">02197</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opEqStringString(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02198"></a>02198                               <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02199"></a>02199 {
<a name="l02200"></a>02200         <span class="keywordflow">return</span> createBooleanValueObject(strcmp(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(a), <a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(b)) == 0);
<a name="l02201"></a>02201 }
<a name="l02202"></a>02202 
<a name="l02211"></a><a class="code" href="interpreter_8h.html#a207c76cef3c01faa73750bd60e9b0037">02211</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opNeqStringString(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02212"></a>02212                                <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02213"></a>02213 {
<a name="l02214"></a>02214         <span class="keywordflow">return</span> createBooleanValueObject(strcmp(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(a), <a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(b)) != 0);
<a name="l02215"></a>02215 }
<a name="l02216"></a>02216 
<a name="l02229"></a><a class="code" href="interpreter_8h.html#aa910b7104ad75428e66766f5bd06f4a8">02229</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opEqNilNil(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02230"></a>02230                         <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02231"></a>02231 {
<a name="l02232"></a>02232         a = NULL;
<a name="l02233"></a>02233         b = NULL;
<a name="l02234"></a>02234         <span class="keywordflow">return</span> createBooleanValueObject(1);
<a name="l02235"></a>02235 }
<a name="l02236"></a>02236 
<a name="l02250"></a><a class="code" href="interpreter_8h.html#a7ad8e455aa33ebc978836eab51b9c268">02250</a> <a class="code" href="struct_value_object.html">ValueObject</a> *opNeqNilNil(<a class="code" href="struct_value_object.html">ValueObject</a> *a, 
<a name="l02251"></a>02251                          <a class="code" href="struct_value_object.html">ValueObject</a> *b) 
<a name="l02252"></a>02252 {
<a name="l02253"></a>02253         a = NULL;
<a name="l02254"></a>02254         b = NULL;
<a name="l02255"></a>02255         <span class="keywordflow">return</span> createBooleanValueObject(0);
<a name="l02256"></a>02256 }
<a name="l02257"></a>02257 
<a name="l02258"></a>02258 <span class="comment">/* A jump table for boolean operations.  The first index determines the</span>
<a name="l02259"></a>02259 <span class="comment"> * particular boolean operation to perform, the second index determines the</span>
<a name="l02260"></a>02260 <span class="comment"> * type of the first argument, and the third index determines the type of the</span>
<a name="l02261"></a>02261 <span class="comment"> * second object. */</span>
<a name="l02262"></a>02262 <span class="keyword">static</span> <a class="code" href="struct_value_object.html">ValueObject</a> *(*BoolOpJumpTable[2][5][5])(<a class="code" href="struct_value_object.html">ValueObject</a> *, <a class="code" href="struct_value_object.html">ValueObject</a> *) = {
<a name="l02263"></a>02263         { <span class="comment">/* OP_EQ */</span>
<a name="l02264"></a>02264                       <span class="comment">/* Integer, Float, Boolean, String, Nil */</span>
<a name="l02265"></a>02265         <span class="comment">/* Integer */</span> { opEqIntegerInteger, opEqIntegerFloat, NULL, NULL, NULL },
<a name="l02266"></a>02266         <span class="comment">/* Float   */</span> { opEqFloatInteger, opEqFloatFloat, NULL, NULL, NULL },
<a name="l02267"></a>02267         <span class="comment">/* Boolean */</span> { NULL, NULL, opEqBooleanBoolean, NULL, NULL },
<a name="l02268"></a>02268         <span class="comment">/* String  */</span> { NULL, NULL, NULL, opEqStringString, NULL },
<a name="l02269"></a>02269         <span class="comment">/* Nil     */</span> { NULL, NULL, NULL, NULL, opEqNilNil }
<a name="l02270"></a>02270         },
<a name="l02271"></a>02271         { <span class="comment">/* OP_NEQ */</span>
<a name="l02272"></a>02272                       <span class="comment">/* Integer, Float, Boolean, String, Nil */</span>
<a name="l02273"></a>02273         <span class="comment">/* Integer */</span> { opNeqIntegerInteger, opNeqIntegerFloat, NULL, NULL, NULL },
<a name="l02274"></a>02274         <span class="comment">/* Float   */</span> { opNeqFloatInteger, opNeqFloatFloat, NULL, NULL, NULL },
<a name="l02275"></a>02275         <span class="comment">/* Boolean */</span> { NULL, NULL, opNeqBooleanBoolean, NULL, NULL },
<a name="l02276"></a>02276         <span class="comment">/* String  */</span> { NULL, NULL, NULL, opNeqStringString, NULL },
<a name="l02277"></a>02277         <span class="comment">/* Nil     */</span> { NULL, NULL, NULL, NULL, opNeqNilNil }
<a name="l02278"></a>02278         }
<a name="l02279"></a>02279 };
<a name="l02280"></a>02280 
<a name="l02302"></a><a class="code" href="interpreter_8h.html#ab84fa97762a03da8689f763fc3165b41">02302</a> <a class="code" href="struct_value_object.html">ValueObject</a> *interpretEqualityOpExprNode(<a class="code" href="struct_op_expr_node.html">OpExprNode</a> *expr,   
<a name="l02303"></a>02303                                          <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02304"></a>02304 {
<a name="l02305"></a>02305         <a class="code" href="struct_value_object.html">ValueObject</a> *val1 = interpretExprNode(expr-&gt;<a class="code" href="struct_op_expr_node.html#a82d6f2c460a585ee3b0a46ce00ba186f">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a10ae95f2facec652ba79e0bb5c9298c1">exprs</a>[0], scope);
<a name="l02306"></a>02306         <a class="code" href="struct_value_object.html">ValueObject</a> *val2 = interpretExprNode(expr-&gt;<a class="code" href="struct_op_expr_node.html#a82d6f2c460a585ee3b0a46ce00ba186f">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a10ae95f2facec652ba79e0bb5c9298c1">exprs</a>[1], scope);
<a name="l02307"></a>02307         <a class="code" href="struct_value_object.html">ValueObject</a> *ret = NULL;
<a name="l02308"></a>02308         <span class="keywordflow">if</span> (!val1 || !val2) {
<a name="l02309"></a>02309                 deleteValueObject(val1);
<a name="l02310"></a>02310                 deleteValueObject(val2);
<a name="l02311"></a>02311                 <span class="keywordflow">return</span> NULL;
<a name="l02312"></a>02312         }
<a name="l02313"></a>02313         <span class="comment">/* Since there is no automatic casting, an equality (inequality) test</span>
<a name="l02314"></a>02314 <span class="comment">         * against a non-number type will always fail (succeed). */</span>
<a name="l02315"></a>02315         <span class="keywordflow">if</span> ((val1-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != val2-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>)
<a name="l02316"></a>02316                         &amp;&amp; ((val1-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a> &amp;&amp; val1-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a361c0d0ff5ba71f4ddd9633d3f79635f">VT_FLOAT</a>)
<a name="l02317"></a>02317                         || (val2-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a> &amp;&amp; val2-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a361c0d0ff5ba71f4ddd9633d3f79635f">VT_FLOAT</a>))) {
<a name="l02318"></a>02318                 <span class="keywordflow">switch</span> (expr-&gt;<a class="code" href="struct_op_expr_node.html#a69ff4baea505db8ed32f4c4027f24ac6">type</a>) {
<a name="l02319"></a>02319                         <span class="keywordflow">case</span> OP_EQ:
<a name="l02320"></a>02320                                 ret = createBooleanValueObject(0);
<a name="l02321"></a>02321                                 <span class="keywordflow">break</span>;
<a name="l02322"></a>02322                         <span class="keywordflow">case</span> OP_NEQ:
<a name="l02323"></a>02323                                 ret = createBooleanValueObject(1);
<a name="l02324"></a>02324                                 <span class="keywordflow">break</span>;
<a name="l02325"></a>02325                         <span class="keywordflow">default</span>:
<a name="l02326"></a>02326                                 fprintf(stderr, <span class="stringliteral">&quot;Invalid equality operation type\n&quot;</span>);
<a name="l02327"></a>02327                                 deleteValueObject(val1);
<a name="l02328"></a>02328                                 deleteValueObject(val2);
<a name="l02329"></a>02329                                 <span class="keywordflow">return</span> NULL;
<a name="l02330"></a>02330                 }
<a name="l02331"></a>02331         }
<a name="l02332"></a>02332         <span class="keywordflow">else</span>
<a name="l02333"></a>02333                 ret = BoolOpJumpTable[expr-&gt;<a class="code" href="struct_op_expr_node.html#a69ff4baea505db8ed32f4c4027f24ac6">type</a> - OP_EQ][val1-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>][val2-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>](val1, val2);
<a name="l02334"></a>02334         deleteValueObject(val1);
<a name="l02335"></a>02335         deleteValueObject(val2);
<a name="l02336"></a>02336         <span class="keywordflow">return</span> ret;
<a name="l02337"></a>02337 }
<a name="l02338"></a>02338 
<a name="l02357"></a><a class="code" href="interpreter_8h.html#a4f45d788f390ee7a01a9f7a13f512d03">02357</a> <a class="code" href="struct_value_object.html">ValueObject</a> *interpretConcatOpExprNode(<a class="code" href="struct_op_expr_node.html">OpExprNode</a> *expr,   
<a name="l02358"></a>02358                                        <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02359"></a>02359 {
<a name="l02360"></a>02360         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l02361"></a>02361         <span class="comment">/* Start out with the first string to concatenate. */</span>
<a name="l02362"></a>02362         <a class="code" href="struct_value_object.html">ValueObject</a> *val = interpretExprNode(expr-&gt;<a class="code" href="struct_op_expr_node.html#a82d6f2c460a585ee3b0a46ce00ba186f">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a10ae95f2facec652ba79e0bb5c9298c1">exprs</a>[0], scope);
<a name="l02363"></a>02363         <a class="code" href="struct_value_object.html">ValueObject</a> *use = castStringImplicit(val, scope);
<a name="l02364"></a>02364         <span class="keywordtype">char</span> *acc = NULL;
<a name="l02365"></a>02365         <span class="keywordtype">void</span> *mem = NULL;
<a name="l02366"></a>02366         <span class="keywordflow">if</span> (!val || !use) {
<a name="l02367"></a>02367                 deleteValueObject(val);
<a name="l02368"></a>02368                 deleteValueObject(use);
<a name="l02369"></a>02369                 <span class="keywordflow">return</span> NULL;
<a name="l02370"></a>02370         }
<a name="l02371"></a>02371         <span class="comment">/* Start out an accumulator with the first string. */</span>
<a name="l02372"></a>02372         mem = realloc(acc, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * (strlen(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(use)) + 1));
<a name="l02373"></a>02373         <span class="keywordflow">if</span> (!mem) {
<a name="l02374"></a>02374                 perror(<span class="stringliteral">&quot;realloc&quot;</span>);
<a name="l02375"></a>02375                 deleteValueObject(val);
<a name="l02376"></a>02376                 deleteValueObject(use);
<a name="l02377"></a>02377                 free(acc);
<a name="l02378"></a>02378                 <span class="keywordflow">return</span> NULL;
<a name="l02379"></a>02379         }
<a name="l02380"></a>02380         acc = mem;
<a name="l02381"></a>02381         acc[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02382"></a>02382         strcat(acc, <a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(use));
<a name="l02383"></a>02383         deleteValueObject(val);
<a name="l02384"></a>02384         deleteValueObject(use);
<a name="l02385"></a>02385         <span class="keywordflow">for</span> (n = 1; n &lt; expr-&gt;<a class="code" href="struct_op_expr_node.html#a82d6f2c460a585ee3b0a46ce00ba186f">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a60f9bbe230725287369033df733a2b04">num</a>; n++) {
<a name="l02386"></a>02386                 <span class="comment">/* Grab the next string to concatenate. */</span>
<a name="l02387"></a>02387                 val = interpretExprNode(expr-&gt;<a class="code" href="struct_op_expr_node.html#a82d6f2c460a585ee3b0a46ce00ba186f">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a10ae95f2facec652ba79e0bb5c9298c1">exprs</a>[n], scope);
<a name="l02388"></a>02388                 use = castStringImplicit(val, scope);
<a name="l02389"></a>02389                 <span class="keywordflow">if</span> (!val || !use) {
<a name="l02390"></a>02390                         deleteValueObject(val);
<a name="l02391"></a>02391                         deleteValueObject(use);
<a name="l02392"></a>02392                         free(acc);
<a name="l02393"></a>02393                         <span class="keywordflow">return</span> NULL;
<a name="l02394"></a>02394                 }
<a name="l02395"></a>02395                 <span class="comment">/* Add the next string to the accumulator. */</span>
<a name="l02396"></a>02396                 mem = realloc(acc, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * (strlen(acc) + strlen(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(use)) + 1));
<a name="l02397"></a>02397                 <span class="keywordflow">if</span> (!mem) {
<a name="l02398"></a>02398                         perror(<span class="stringliteral">&quot;realloc&quot;</span>);
<a name="l02399"></a>02399                         deleteValueObject(val);
<a name="l02400"></a>02400                         deleteValueObject(use);
<a name="l02401"></a>02401                         free(acc);
<a name="l02402"></a>02402                         <span class="keywordflow">return</span> NULL;
<a name="l02403"></a>02403                 }
<a name="l02404"></a>02404                 acc = mem;
<a name="l02405"></a>02405                 strcat(acc, <a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(use));
<a name="l02406"></a>02406                 deleteValueObject(val);
<a name="l02407"></a>02407                 deleteValueObject(use);
<a name="l02408"></a>02408         }
<a name="l02409"></a>02409         <span class="keywordflow">return</span> createStringValueObject(acc);
<a name="l02410"></a>02410 }
<a name="l02411"></a>02411 
<a name="l02412"></a>02412 <span class="comment">/* A jump table for operations.  The index of a function in the table is given</span>
<a name="l02413"></a>02413 <span class="comment"> * by its its index in the enumerated OpType type. */</span>
<a name="l02414"></a>02414 <span class="keyword">static</span> <a class="code" href="struct_value_object.html">ValueObject</a> *(*OpExprJumpTable[14])(<a class="code" href="struct_op_expr_node.html">OpExprNode</a> *, <a class="code" href="structscopeobject.html">ScopeObject</a> *) = {
<a name="l02415"></a>02415         interpretArithOpExprNode,
<a name="l02416"></a>02416         interpretArithOpExprNode,
<a name="l02417"></a>02417         interpretArithOpExprNode,
<a name="l02418"></a>02418         interpretArithOpExprNode,
<a name="l02419"></a>02419         interpretArithOpExprNode,
<a name="l02420"></a>02420         interpretArithOpExprNode,
<a name="l02421"></a>02421         interpretArithOpExprNode,
<a name="l02422"></a>02422         interpretBoolOpExprNode,
<a name="l02423"></a>02423         interpretBoolOpExprNode,
<a name="l02424"></a>02424         interpretBoolOpExprNode,
<a name="l02425"></a>02425         interpretNotOpExprNode,
<a name="l02426"></a>02426         interpretEqualityOpExprNode,
<a name="l02427"></a>02427         interpretEqualityOpExprNode,
<a name="l02428"></a>02428         interpretConcatOpExprNode };
<a name="l02429"></a>02429 
<a name="l02447"></a><a class="code" href="interpreter_8h.html#a14b3a72f8c575160185d3e1ddd9721c3">02447</a> <a class="code" href="struct_value_object.html">ValueObject</a> *interpretOpExprNode(<a class="code" href="struct_expr_node.html">ExprNode</a> *node,     
<a name="l02448"></a>02448                                  <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02449"></a>02449 {
<a name="l02450"></a>02450         <a class="code" href="struct_op_expr_node.html">OpExprNode</a> *expr = (<a class="code" href="struct_op_expr_node.html">OpExprNode</a> *)node-&gt;<a class="code" href="struct_expr_node.html#a2c6ff3dccfa2e543a46e01763adab3a8">expr</a>;
<a name="l02451"></a>02451         <span class="keywordflow">return</span> OpExprJumpTable[expr-&gt;<a class="code" href="struct_op_expr_node.html#a69ff4baea505db8ed32f4c4027f24ac6">type</a>](expr, scope);
<a name="l02452"></a>02452 }
<a name="l02453"></a>02453 
<a name="l02454"></a>02454 <span class="comment">/* A jump table for expressions.  The index of a function in the table is given</span>
<a name="l02455"></a>02455 <span class="comment"> * by its its index in the enumerated ExprType type. */</span>
<a name="l02456"></a>02456 <span class="keyword">static</span> <a class="code" href="struct_value_object.html">ValueObject</a> *(*ExprJumpTable[6])(<a class="code" href="struct_expr_node.html">ExprNode</a> *, <a class="code" href="structscopeobject.html">ScopeObject</a> *) = {
<a name="l02457"></a>02457         interpretCastExprNode,
<a name="l02458"></a>02458         interpretConstantExprNode,
<a name="l02459"></a>02459         interpretIdentifierExprNode,
<a name="l02460"></a>02460         interpretFuncCallExprNode,
<a name="l02461"></a>02461         interpretOpExprNode,
<a name="l02462"></a>02462         interpretImpVarExprNode };
<a name="l02463"></a>02463 
<a name="l02480"></a><a class="code" href="interpreter_8h.html#a88e238ecbd85b9cfce3d34ad7025774d">02480</a> <a class="code" href="struct_value_object.html">ValueObject</a> *interpretExprNode(<a class="code" href="struct_expr_node.html">ExprNode</a> *node,     
<a name="l02481"></a>02481                                <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02482"></a>02482 {
<a name="l02483"></a>02483         <span class="keywordflow">return</span> ExprJumpTable[node-&gt;<a class="code" href="struct_expr_node.html#ab5f285d791068c69dbca0610d8c36c99">type</a>](node, scope);
<a name="l02484"></a>02484 }
<a name="l02485"></a>02485 
<a name="l02509"></a><a class="code" href="interpreter_8h.html#a5742a88c672e9e224aecef05663d41ea">02509</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretCastStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l02510"></a>02510                                     <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02511"></a>02511 {
<a name="l02512"></a>02512         <a class="code" href="struct_cast_stmt_node.html">CastStmtNode</a> *stmt = (<a class="code" href="struct_cast_stmt_node.html">CastStmtNode</a> *)node-&gt;<a class="code" href="struct_stmt_node.html#abe2bb8927d8a9a26b83d855fb14837e6">stmt</a>;
<a name="l02513"></a>02513         <a class="code" href="struct_value_object.html">ValueObject</a> *val = getScopeValue(scope, stmt-&gt;<a class="code" href="struct_cast_stmt_node.html#a89d56358f0a8fc4d4fb0df7029ea494e">target</a>);
<a name="l02514"></a>02514         <a class="code" href="struct_value_object.html">ValueObject</a> *cast = NULL;
<a name="l02515"></a>02515         <span class="keywordflow">if</span> (!val) {
<a name="l02516"></a>02516                 <a class="code" href="struct_identifier_node.html">IdentifierNode</a> *<span class="keywordtype">id</span> = (<a class="code" href="struct_identifier_node.html">IdentifierNode</a> *)(stmt-&gt;<a class="code" href="struct_cast_stmt_node.html#a89d56358f0a8fc4d4fb0df7029ea494e">target</a>);
<a name="l02517"></a>02517                 fprintf(stderr, <span class="stringliteral">&quot;%s:%d: variable does not exist at: %s\n&quot;</span>, id-&gt;<a class="code" href="struct_identifier_node.html#a3e2e04a380b98e30c1227ae747edbe18">fname</a>, id-&gt;<a class="code" href="struct_identifier_node.html#a64ed52f14bcfabff321d105e0a54648d">line</a>, id-&gt;<a class="code" href="struct_identifier_node.html#a3e2473c7676f22d1f3beebe66f0a7688">image</a>);
<a name="l02518"></a>02518                 <span class="keywordflow">return</span> NULL;
<a name="l02519"></a>02519         }
<a name="l02520"></a>02520         <span class="keywordflow">switch</span>(stmt-&gt;<a class="code" href="struct_cast_stmt_node.html#adbeebc6cefa4f2cb92079b82cb4f4df8">newtype</a>-&gt;<a class="code" href="struct_type_node.html#abd5fc196a6f39c15eb33e94eec269ac7">type</a>) {
<a name="l02521"></a>02521                 <span class="keywordflow">case</span> CT_NIL:
<a name="l02522"></a>02522                         <span class="keywordflow">if</span> (!(cast = createNilValueObject())) <span class="keywordflow">return</span> NULL;
<a name="l02523"></a>02523                         <span class="keywordflow">break</span>;
<a name="l02524"></a>02524                 <span class="keywordflow">case</span> CT_BOOLEAN:
<a name="l02525"></a>02525                         <span class="keywordflow">if</span> (!(cast = castBooleanExplicit(val, scope))) <span class="keywordflow">return</span> NULL;
<a name="l02526"></a>02526                         <span class="keywordflow">break</span>;
<a name="l02527"></a>02527                 <span class="keywordflow">case</span> CT_INTEGER:
<a name="l02528"></a>02528                         <span class="keywordflow">if</span> (!(cast = castIntegerExplicit(val, scope))) <span class="keywordflow">return</span> NULL;
<a name="l02529"></a>02529                         <span class="keywordflow">break</span>;
<a name="l02530"></a>02530                 <span class="keywordflow">case</span> CT_FLOAT:
<a name="l02531"></a>02531                         <span class="keywordflow">if</span> (!(cast = castFloatExplicit(val, scope))) <span class="keywordflow">return</span> NULL;
<a name="l02532"></a>02532                         <span class="keywordflow">break</span>;
<a name="l02533"></a>02533                 <span class="keywordflow">case</span> CT_STRING:
<a name="l02534"></a>02534                         <span class="keywordflow">if</span> (!(cast = castStringExplicit(val, scope))) <span class="keywordflow">return</span> NULL;
<a name="l02535"></a>02535                         <span class="keywordflow">break</span>;
<a name="l02536"></a>02536         }
<a name="l02537"></a>02537         <span class="keywordflow">if</span> (!updateScopeValue(scope, stmt-&gt;<a class="code" href="struct_cast_stmt_node.html#a89d56358f0a8fc4d4fb0df7029ea494e">target</a>, cast)) {
<a name="l02538"></a>02538                 deleteValueObject(cast);
<a name="l02539"></a>02539                 <span class="keywordflow">return</span> NULL;
<a name="l02540"></a>02540         }
<a name="l02541"></a>02541         <span class="keywordflow">return</span> createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cca5799e236aeee53b6fe285dc67cb42f00">RT_DEFAULT</a>, NULL);
<a name="l02542"></a>02542 }
<a name="l02543"></a>02543 
<a name="l02567"></a><a class="code" href="interpreter_8h.html#a3099ebd9282870922a92b1b59f675458">02567</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretPrintStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l02568"></a>02568                                      <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02569"></a>02569 {
<a name="l02570"></a>02570         <a class="code" href="struct_print_stmt_node.html">PrintStmtNode</a> *stmt = (<a class="code" href="struct_print_stmt_node.html">PrintStmtNode</a> *)node-&gt;<a class="code" href="struct_stmt_node.html#abe2bb8927d8a9a26b83d855fb14837e6">stmt</a>;
<a name="l02571"></a>02571         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l02572"></a>02572         for (n = 0; n &lt; stmt-&gt;<a class="code" href="struct_print_stmt_node.html#a9ee87b79d331dc05b6a4bb27462a5f69">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a60f9bbe230725287369033df733a2b04">num</a>; n++) {
<a name="l02573"></a>02573                 <a class="code" href="struct_value_object.html">ValueObject</a> *val = interpretExprNode(stmt-&gt;<a class="code" href="struct_print_stmt_node.html#a9ee87b79d331dc05b6a4bb27462a5f69">args</a>-&gt;<a class="code" href="struct_expr_node_list.html#a10ae95f2facec652ba79e0bb5c9298c1">exprs</a>[n], scope);
<a name="l02574"></a>02574                 <a class="code" href="struct_value_object.html">ValueObject</a> *use = castStringImplicit(val, scope);
<a name="l02575"></a>02575                 <span class="keywordflow">if</span> (!val || !use) {
<a name="l02576"></a>02576                         deleteValueObject(val);
<a name="l02577"></a>02577                         deleteValueObject(use);
<a name="l02578"></a>02578                         <span class="keywordflow">return</span> NULL;
<a name="l02579"></a>02579                 }
<a name="l02580"></a>02580                 printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(use));
<a name="l02581"></a>02581                 deleteValueObject(val);
<a name="l02582"></a>02582                 deleteValueObject(use);
<a name="l02583"></a>02583         }
<a name="l02584"></a>02584         <span class="keywordflow">if</span> (!stmt-&gt;<a class="code" href="struct_print_stmt_node.html#a147ba34eeda7bcfb39f2846a678d091c">nonl</a>)
<a name="l02585"></a>02585                 printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l02586"></a>02586         <span class="keywordflow">return</span> createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cca5799e236aeee53b6fe285dc67cb42f00">RT_DEFAULT</a>, NULL);
<a name="l02587"></a>02587 }
<a name="l02588"></a>02588 
<a name="l02612"></a><a class="code" href="interpreter_8h.html#ababafcbe6b8e86ed3284bb6643baafa4">02612</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretInputStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l02613"></a>02613                                      <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02614"></a>02614 {
<a name="l02615"></a>02615         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = 16;
<a name="l02616"></a>02616         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cur = 0;
<a name="l02617"></a>02617         <span class="keywordtype">char</span> *temp = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * size);
<a name="l02618"></a>02618         <span class="keywordtype">char</span> c;
<a name="l02619"></a>02619         <span class="keywordtype">void</span> *mem = NULL;
<a name="l02620"></a>02620         <a class="code" href="struct_input_stmt_node.html">InputStmtNode</a> *stmt = (<a class="code" href="struct_input_stmt_node.html">InputStmtNode</a> *)node-&gt;<a class="code" href="struct_stmt_node.html#abe2bb8927d8a9a26b83d855fb14837e6">stmt</a>;
<a name="l02621"></a>02621         <a class="code" href="struct_value_object.html">ValueObject</a> *val = NULL;
<a name="l02622"></a>02622         while ((c = getchar()) &amp;&amp; !feof(stdin)) {
<a name="l02626"></a>02626                 <span class="keywordflow">if</span> (c == EOF || c == <span class="charliteral">&#39;\r&#39;</span> || c == <span class="charliteral">&#39;\n&#39;</span>) <span class="keywordflow">break</span>;
<a name="l02627"></a>02627                 <span class="keywordflow">if</span> (cur &gt; size - 1) {
<a name="l02628"></a>02628                         <span class="comment">/* Increasing buffer size. */</span>
<a name="l02629"></a>02629                         size *= 2;
<a name="l02630"></a>02630                         mem = realloc(temp, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * size);
<a name="l02631"></a>02631                         <span class="keywordflow">if</span> (!mem) {
<a name="l02632"></a>02632                                 perror(<span class="stringliteral">&quot;realloc&quot;</span>);
<a name="l02633"></a>02633                                 free(temp);
<a name="l02634"></a>02634                                 <span class="keywordflow">return</span> NULL;
<a name="l02635"></a>02635                         }
<a name="l02636"></a>02636                         temp = mem;
<a name="l02637"></a>02637                 }
<a name="l02638"></a>02638                 temp[cur] = c;
<a name="l02639"></a>02639                 cur++;
<a name="l02640"></a>02640         }
<a name="l02641"></a>02641         temp[cur] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02642"></a>02642         val = createStringValueObject(temp);
<a name="l02643"></a>02643         <span class="keywordflow">if</span> (!val) {
<a name="l02644"></a>02644                 free(temp);
<a name="l02645"></a>02645                 <span class="keywordflow">return</span> NULL;
<a name="l02646"></a>02646         }
<a name="l02647"></a>02647         <span class="keywordflow">if</span> (!updateScopeValue(scope, stmt-&gt;<a class="code" href="struct_input_stmt_node.html#ad7cb247683faf94a9da01d08055349f2">target</a>, val)) {
<a name="l02648"></a>02648                 deleteValueObject(val);
<a name="l02649"></a>02649                 <span class="keywordflow">return</span> NULL;
<a name="l02650"></a>02650         }
<a name="l02651"></a>02651         <span class="keywordflow">return</span> createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cca5799e236aeee53b6fe285dc67cb42f00">RT_DEFAULT</a>, NULL);
<a name="l02652"></a>02652 }
<a name="l02653"></a>02653 
<a name="l02677"></a><a class="code" href="interpreter_8h.html#a644bee21f70eaa27dd40ae1a9ea07145">02677</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretAssignmentStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l02678"></a>02678                                           <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02679"></a>02679 {
<a name="l02680"></a>02680         <a class="code" href="struct_assignment_stmt_node.html">AssignmentStmtNode</a> *stmt = (<a class="code" href="struct_assignment_stmt_node.html">AssignmentStmtNode</a> *)node-&gt;<a class="code" href="struct_stmt_node.html#abe2bb8927d8a9a26b83d855fb14837e6">stmt</a>;
<a name="l02681"></a>02681         <a class="code" href="struct_value_object.html">ValueObject</a> *val = interpretExprNode(stmt-&gt;<a class="code" href="struct_assignment_stmt_node.html#af25b11d4ed4159da853c540641f0db24">expr</a>, scope);
<a name="l02682"></a>02682         <span class="keywordflow">if</span> (!val) <span class="keywordflow">return</span> NULL;
<a name="l02683"></a>02683         <span class="keywordflow">if</span> (!updateScopeValue(scope, stmt-&gt;<a class="code" href="struct_assignment_stmt_node.html#a6bdcf7c297f54d4269849cb96c8161a6">target</a>, val)) {
<a name="l02684"></a>02684                 deleteValueObject(val);
<a name="l02685"></a>02685                 <span class="keywordflow">return</span> NULL;
<a name="l02686"></a>02686         }
<a name="l02687"></a>02687         <span class="keywordflow">return</span> createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cca5799e236aeee53b6fe285dc67cb42f00">RT_DEFAULT</a>, NULL);
<a name="l02688"></a>02688 }
<a name="l02689"></a>02689 
<a name="l02713"></a><a class="code" href="interpreter_8h.html#a8f688271f7f3ad36ce62428e55940c03">02713</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretDeclarationStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l02714"></a>02714                                            <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02715"></a>02715 {
<a name="l02716"></a>02716         <a class="code" href="struct_declaration_stmt_node.html">DeclarationStmtNode</a> *stmt = (<a class="code" href="struct_declaration_stmt_node.html">DeclarationStmtNode</a> *)node-&gt;<a class="code" href="struct_stmt_node.html#abe2bb8927d8a9a26b83d855fb14837e6">stmt</a>;
<a name="l02717"></a>02717         <a class="code" href="struct_value_object.html">ValueObject</a> *init = NULL;
<a name="l02718"></a>02718         if (getLocalScopeValue(scope, stmt-&gt;<a class="code" href="struct_declaration_stmt_node.html#a6fed156d07803ffd41487e873bcef98f">target</a>)) {
<a name="l02719"></a>02719                 <a class="code" href="struct_identifier_node.html">IdentifierNode</a> *<span class="keywordtype">id</span> = (<a class="code" href="struct_identifier_node.html">IdentifierNode</a> *)(stmt-&gt;<a class="code" href="struct_declaration_stmt_node.html#a6fed156d07803ffd41487e873bcef98f">target</a>);
<a name="l02720"></a>02720                 fprintf(stderr, <span class="stringliteral">&quot;%s:%d: redefinition of existing variable at: %s\n&quot;</span>, id-&gt;<a class="code" href="struct_identifier_node.html#a3e2e04a380b98e30c1227ae747edbe18">fname</a>, id-&gt;<a class="code" href="struct_identifier_node.html#a64ed52f14bcfabff321d105e0a54648d">line</a>, id-&gt;<a class="code" href="struct_identifier_node.html#a3e2473c7676f22d1f3beebe66f0a7688">image</a>);
<a name="l02721"></a>02721                 <span class="keywordflow">return</span> NULL;
<a name="l02722"></a>02722         }
<a name="l02723"></a>02723         <span class="keywordflow">if</span> (stmt-&gt;<a class="code" href="struct_declaration_stmt_node.html#aba3f89fdd66c4b0264490aa639a6bd6f">expr</a>)
<a name="l02724"></a>02724                 init = interpretExprNode(stmt-&gt;<a class="code" href="struct_declaration_stmt_node.html#aba3f89fdd66c4b0264490aa639a6bd6f">expr</a>, scope);
<a name="l02725"></a>02725         <span class="keywordflow">else</span>
<a name="l02726"></a>02726                 init = createNilValueObject();
<a name="l02727"></a>02727         <span class="keywordflow">if</span> (!init) <span class="keywordflow">return</span> NULL;
<a name="l02728"></a>02728         <span class="keywordflow">if</span> (!createScopeValue(scope, stmt-&gt;<a class="code" href="struct_declaration_stmt_node.html#a6fed156d07803ffd41487e873bcef98f">target</a>)) {
<a name="l02729"></a>02729                 deleteValueObject(init);
<a name="l02730"></a>02730                 <span class="keywordflow">return</span> NULL;
<a name="l02731"></a>02731         }
<a name="l02732"></a>02732         <span class="keywordflow">if</span> (!updateScopeValue(scope, stmt-&gt;<a class="code" href="struct_declaration_stmt_node.html#a6fed156d07803ffd41487e873bcef98f">target</a>, init)) {
<a name="l02733"></a>02733                 deleteValueObject(init);
<a name="l02734"></a>02734                 <span class="keywordflow">return</span> NULL;
<a name="l02735"></a>02735         }
<a name="l02736"></a>02736         <span class="keywordflow">return</span> createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cca5799e236aeee53b6fe285dc67cb42f00">RT_DEFAULT</a>, NULL);
<a name="l02737"></a>02737 }
<a name="l02738"></a>02738 
<a name="l02762"></a><a class="code" href="interpreter_8h.html#a0214f5c76bcb63a1fbb9a242f9341763">02762</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretIfThenElseStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l02763"></a>02763                                           <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02764"></a>02764 {
<a name="l02765"></a>02765         <a class="code" href="struct_if_then_else_stmt_node.html">IfThenElseStmtNode</a> *stmt = (<a class="code" href="struct_if_then_else_stmt_node.html">IfThenElseStmtNode</a> *)node-&gt;<a class="code" href="struct_stmt_node.html#abe2bb8927d8a9a26b83d855fb14837e6">stmt</a>;
<a name="l02766"></a>02766         <a class="code" href="struct_value_object.html">ValueObject</a> *use1 = scope-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a>;
<a name="l02767"></a>02767         <span class="keywordtype">int</span> use1val;
<a name="l02768"></a>02768         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cast1 = 0;
<a name="l02769"></a>02769         <a class="code" href="struct_block_node.html">BlockNode</a> *path = NULL;
<a name="l02770"></a>02770         if (scope-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a>-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a> &amp;&amp; scope-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a>-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>) {
<a name="l02771"></a>02771                 use1 = castBooleanImplicit(scope-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a>, scope);
<a name="l02772"></a>02772                 <span class="keywordflow">if</span> (!use1) <span class="keywordflow">return</span> NULL;
<a name="l02773"></a>02773                 cast1 = 1;
<a name="l02774"></a>02774         }
<a name="l02775"></a>02775         use1val = <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(use1);
<a name="l02776"></a>02776         <span class="keywordflow">if</span> (cast1) deleteValueObject(use1);
<a name="l02777"></a>02777         <span class="comment">/* Determine which block of code to execute */</span>
<a name="l02778"></a>02778         <span class="keywordflow">if</span> (use1val)
<a name="l02779"></a>02779                 path = stmt-&gt;<a class="code" href="struct_if_then_else_stmt_node.html#ae28470757cf61cab67dd9096114f4710">yes</a>;
<a name="l02780"></a>02780         <span class="keywordflow">else</span> {
<a name="l02781"></a>02781                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l02782"></a>02782                 <span class="keywordflow">for</span> (n = 0; n &lt; stmt-&gt;<a class="code" href="struct_if_then_else_stmt_node.html#ad94295fb6d16e9815a85e0d8e930f079">guards</a>-&gt;<a class="code" href="struct_expr_node_list.html#a60f9bbe230725287369033df733a2b04">num</a>; n++) {
<a name="l02783"></a>02783                         <a class="code" href="struct_value_object.html">ValueObject</a> *val = interpretExprNode(stmt-&gt;<a class="code" href="struct_if_then_else_stmt_node.html#ad94295fb6d16e9815a85e0d8e930f079">guards</a>-&gt;<a class="code" href="struct_expr_node_list.html#a10ae95f2facec652ba79e0bb5c9298c1">exprs</a>[n], scope);
<a name="l02784"></a>02784                         <a class="code" href="struct_value_object.html">ValueObject</a> *use2 = val;
<a name="l02785"></a>02785                         <span class="keywordtype">int</span> use2val;
<a name="l02786"></a>02786                         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cast2 = 0;
<a name="l02787"></a>02787                         <span class="keywordflow">if</span> (!val) <span class="keywordflow">return</span> NULL;
<a name="l02788"></a>02788                         <span class="keywordflow">if</span> (val-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a> &amp;&amp; val-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>) {
<a name="l02789"></a>02789                                 use2 = castBooleanImplicit(val, scope);
<a name="l02790"></a>02790                                 <span class="keywordflow">if</span> (!use2) {
<a name="l02791"></a>02791                                         deleteValueObject(val);
<a name="l02792"></a>02792                                         <span class="keywordflow">return</span> NULL;
<a name="l02793"></a>02793                                 }
<a name="l02794"></a>02794                                 cast2 = 1;
<a name="l02795"></a>02795                         }
<a name="l02796"></a>02796                         use2val = <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(use2);
<a name="l02797"></a>02797                         deleteValueObject(val);
<a name="l02798"></a>02798                         <span class="keywordflow">if</span> (cast2) deleteValueObject(use2);
<a name="l02799"></a>02799                         <span class="keywordflow">if</span> (use2val) {
<a name="l02800"></a>02800                                 path = stmt-&gt;<a class="code" href="struct_if_then_else_stmt_node.html#ab4b9831a1e7db13c206997a45ee84a95">blocks</a>-&gt;<a class="code" href="struct_block_node_list.html#a97ab8b891f65c2f8152712d59f69be64">blocks</a>[n];
<a name="l02801"></a>02801                                 <span class="keywordflow">break</span>;
<a name="l02802"></a>02802                         }
<a name="l02803"></a>02803                 }
<a name="l02804"></a>02804                 <span class="comment">/* Reached the end without satisfying any guard */</span>
<a name="l02805"></a>02805                 <span class="keywordflow">if</span> (n == stmt-&gt;<a class="code" href="struct_if_then_else_stmt_node.html#ad94295fb6d16e9815a85e0d8e930f079">guards</a>-&gt;<a class="code" href="struct_expr_node_list.html#a60f9bbe230725287369033df733a2b04">num</a>)
<a name="l02806"></a>02806                         path = stmt-&gt;<a class="code" href="struct_if_then_else_stmt_node.html#aeb7d6e0fb8dad0d6e894bcdc887306fe">no</a>;
<a name="l02807"></a>02807         }
<a name="l02808"></a>02808         <span class="comment">/* Interpret a path if one was reached */</span>
<a name="l02809"></a>02809         <span class="keywordflow">if</span> (path) {
<a name="l02810"></a>02810                 <a class="code" href="struct_return_object.html">ReturnObject</a> *r = interpretBlockNode(path, scope);
<a name="l02811"></a>02811                 <span class="keywordflow">if</span> (!r)
<a name="l02812"></a>02812                         <span class="keywordflow">return</span> NULL;
<a name="l02813"></a>02813                 <span class="comment">/* Pass this up to the outer block to handle. */</span>
<a name="l02814"></a>02814                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r-&gt;<a class="code" href="struct_return_object.html#a79da4f77fc9fa5dfeefbd750b0caddb0">type</a> == <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccaa22f8c8892450d4ee8806a80a7e12b64">RT_BREAK</a> || r-&gt;<a class="code" href="struct_return_object.html#a79da4f77fc9fa5dfeefbd750b0caddb0">type</a> == <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccae089a7a50c323705d8c848d0308ca41b">RT_RETURN</a>)
<a name="l02815"></a>02815                         <span class="keywordflow">return</span> r;
<a name="l02816"></a>02816                 <span class="keywordflow">else</span>
<a name="l02817"></a>02817                         deleteReturnObject(r);
<a name="l02818"></a>02818         }
<a name="l02819"></a>02819         <span class="keywordflow">return</span> createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cca5799e236aeee53b6fe285dc67cb42f00">RT_DEFAULT</a>, NULL);
<a name="l02820"></a>02820 }
<a name="l02821"></a>02821 
<a name="l02853"></a><a class="code" href="interpreter_8h.html#acbbc71ff8da84a69bea6a533c73c02ff">02853</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretSwitchStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l02854"></a>02854                                       <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02855"></a>02855 {
<a name="l02856"></a>02856         <a class="code" href="struct_switch_stmt_node.html">SwitchStmtNode</a> *stmt = (<a class="code" href="struct_switch_stmt_node.html">SwitchStmtNode</a> *)node-&gt;<a class="code" href="struct_stmt_node.html#abe2bb8927d8a9a26b83d855fb14837e6">stmt</a>;
<a name="l02857"></a>02857         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l02858"></a>02858         <span class="comment">/* Loop over each of the guards, checking if any match the implicit</span>
<a name="l02859"></a>02859 <span class="comment">         * variable. */</span>
<a name="l02860"></a>02860         for (n = 0; n &lt; stmt-&gt;<a class="code" href="struct_switch_stmt_node.html#a125319a6fd02d72d96d41193daffb4a2">guards</a>-&gt;<a class="code" href="struct_expr_node_list.html#a60f9bbe230725287369033df733a2b04">num</a>; n++) {
<a name="l02861"></a>02861                 <a class="code" href="struct_value_object.html">ValueObject</a> *use1 = scope-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a>;
<a name="l02862"></a>02862                 <a class="code" href="struct_value_object.html">ValueObject</a> *use2 = interpretExprNode(stmt-&gt;<a class="code" href="struct_switch_stmt_node.html#a125319a6fd02d72d96d41193daffb4a2">guards</a>-&gt;<a class="code" href="struct_expr_node_list.html#a10ae95f2facec652ba79e0bb5c9298c1">exprs</a>[n], scope);
<a name="l02863"></a>02863                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> done = 0;
<a name="l02864"></a>02864                 <span class="keywordflow">if</span> (!use2) <span class="keywordflow">return</span> NULL;
<a name="l02865"></a>02865                 <span class="keywordflow">if</span> (use1-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> == use2-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>) {
<a name="l02866"></a>02866                         <span class="keywordflow">switch</span> (use1-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a>) {
<a name="l02867"></a>02867                                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a523067b7870725372ce9aa1399a8abba">VT_NIL</a>:
<a name="l02868"></a>02868                                         <span class="keywordflow">break</span>;
<a name="l02869"></a>02869                                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a>:
<a name="l02870"></a>02870                                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>:
<a name="l02871"></a>02871                                         <span class="keywordflow">if</span> (<a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(use1) == <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(use2))
<a name="l02872"></a>02872                                                 done = 1;
<a name="l02873"></a>02873                                         <span class="keywordflow">break</span>;
<a name="l02874"></a>02874                                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a361c0d0ff5ba71f4ddd9633d3f79635f">VT_FLOAT</a>:
<a name="l02875"></a>02875                                         <span class="keywordflow">if</span> (<a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(use1) == <a class="code" href="interpreter_8h.html#a476129305e12675fd848537c7a23be7e">getFloat</a>(use2))
<a name="l02876"></a>02876                                                 done = 1;
<a name="l02877"></a>02877                                         <span class="keywordflow">break</span>;
<a name="l02878"></a>02878                                 <span class="keywordflow">case</span> <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a7d0ada66d85d8eb695f3bdd2e48b5976">VT_STRING</a>:
<a name="l02882"></a>02882                                         <span class="keywordflow">if</span> (!strcmp(<a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(use1), <a class="code" href="interpreter_8h.html#a2267d4f53f5d3d35446667cc2b26f392">getString</a>(use2)))
<a name="l02883"></a>02883                                                 done = 1;
<a name="l02884"></a>02884                                         <span class="keywordflow">break</span>;
<a name="l02885"></a>02885                                 <span class="keywordflow">default</span>:
<a name="l02886"></a>02886                                         fprintf(stderr, <span class="stringliteral">&quot;Invalid type\n&quot;</span>);
<a name="l02887"></a>02887                                         deleteValueObject(use2);
<a name="l02888"></a>02888                                         <span class="keywordflow">return</span> NULL;
<a name="l02889"></a>02889                         }
<a name="l02890"></a>02890                 }
<a name="l02891"></a>02891                 deleteValueObject(use2);
<a name="l02892"></a>02892                 <span class="keywordflow">if</span> (done) <span class="keywordflow">break</span>;
<a name="l02893"></a>02893         }
<a name="l02894"></a>02894         <span class="comment">/* If none of the guards match and a default block exists */</span>
<a name="l02895"></a>02895         <span class="keywordflow">if</span> (n == stmt-&gt;<a class="code" href="struct_switch_stmt_node.html#a6cdb5c66044261b28302b6ca682d7564">blocks</a>-&gt;<a class="code" href="struct_block_node_list.html#af36c77e76b73f0fa500ada63aaad2dd7">num</a> &amp;&amp; stmt-&gt;<a class="code" href="struct_switch_stmt_node.html#ad75de1632a46c451d251959e56d53d44">def</a>) {
<a name="l02896"></a>02896                 <a class="code" href="struct_return_object.html">ReturnObject</a> *r = interpretBlockNode(stmt-&gt;<a class="code" href="struct_switch_stmt_node.html#ad75de1632a46c451d251959e56d53d44">def</a>, scope);
<a name="l02897"></a>02897                 <span class="keywordflow">if</span> (!r)
<a name="l02898"></a>02898                         <span class="keywordflow">return</span> NULL;
<a name="l02899"></a>02899                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r-&gt;<a class="code" href="struct_return_object.html#a79da4f77fc9fa5dfeefbd750b0caddb0">type</a> == <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccae089a7a50c323705d8c848d0308ca41b">RT_RETURN</a>)
<a name="l02900"></a>02900                         <span class="keywordflow">return</span> r;
<a name="l02901"></a>02901                 <span class="keywordflow">else</span>
<a name="l02902"></a>02902                         deleteReturnObject(r);
<a name="l02903"></a>02903         }
<a name="l02904"></a>02904         <span class="keywordflow">else</span> {
<a name="l02905"></a>02905                 <span class="comment">/* Keep interpreting blocks starting at n until a break or</span>
<a name="l02906"></a>02906 <span class="comment">                 * return is encountered. */</span>
<a name="l02907"></a>02907                 <span class="keywordflow">for</span> (; n &lt; stmt-&gt;<a class="code" href="struct_switch_stmt_node.html#a6cdb5c66044261b28302b6ca682d7564">blocks</a>-&gt;<a class="code" href="struct_block_node_list.html#af36c77e76b73f0fa500ada63aaad2dd7">num</a>; n++) {
<a name="l02908"></a>02908                         <a class="code" href="struct_return_object.html">ReturnObject</a> *r = interpretBlockNode(stmt-&gt;<a class="code" href="struct_switch_stmt_node.html#a6cdb5c66044261b28302b6ca682d7564">blocks</a>-&gt;<a class="code" href="struct_block_node_list.html#a97ab8b891f65c2f8152712d59f69be64">blocks</a>[n], scope);
<a name="l02909"></a>02909                         <span class="keywordflow">if</span> (!r)
<a name="l02910"></a>02910                                 <span class="keywordflow">return</span> NULL;
<a name="l02911"></a>02911                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r-&gt;<a class="code" href="struct_return_object.html#a79da4f77fc9fa5dfeefbd750b0caddb0">type</a> == <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccaa22f8c8892450d4ee8806a80a7e12b64">RT_BREAK</a>) {
<a name="l02912"></a>02912                                 deleteReturnObject(r);
<a name="l02913"></a>02913                                 <span class="keywordflow">break</span>;
<a name="l02914"></a>02914                         }
<a name="l02915"></a>02915                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r-&gt;<a class="code" href="struct_return_object.html#a79da4f77fc9fa5dfeefbd750b0caddb0">type</a> == <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccae089a7a50c323705d8c848d0308ca41b">RT_RETURN</a>)
<a name="l02916"></a>02916                                 <span class="keywordflow">return</span> r;
<a name="l02917"></a>02917                         <span class="keywordflow">else</span>
<a name="l02918"></a>02918                                 deleteReturnObject(r);
<a name="l02919"></a>02919                 }
<a name="l02920"></a>02920         }
<a name="l02921"></a>02921         <span class="keywordflow">return</span> createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cca5799e236aeee53b6fe285dc67cb42f00">RT_DEFAULT</a>, NULL);
<a name="l02922"></a>02922 }
<a name="l02923"></a>02923 
<a name="l02951"></a><a class="code" href="interpreter_8h.html#af8856c962dbaeb39b8a2570c3939bebf">02951</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretBreakStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l02952"></a>02952                                      <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02953"></a>02953 {
<a name="l02954"></a>02954         node = NULL;
<a name="l02955"></a>02955         scope = NULL;
<a name="l02956"></a>02956         <span class="keywordflow">return</span> createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccaa22f8c8892450d4ee8806a80a7e12b64">RT_BREAK</a>, NULL);
<a name="l02957"></a>02957 }
<a name="l02958"></a>02958 
<a name="l02983"></a><a class="code" href="interpreter_8h.html#a83339941f601e7cbbecb09c7501b49fd">02983</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretReturnStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l02984"></a>02984                                       <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l02985"></a>02985 {
<a name="l02986"></a>02986         <span class="comment">/* Evaluate and return the expression. */</span>
<a name="l02987"></a>02987         <a class="code" href="struct_return_stmt_node.html">ReturnStmtNode</a> *stmt = (<a class="code" href="struct_return_stmt_node.html">ReturnStmtNode</a> *)node-&gt;<a class="code" href="struct_stmt_node.html#abe2bb8927d8a9a26b83d855fb14837e6">stmt</a>;
<a name="l02988"></a>02988         <a class="code" href="struct_value_object.html">ValueObject</a> *value = interpretExprNode(stmt-&gt;<a class="code" href="struct_return_stmt_node.html#ac610b54406ae3bc54e3d5c4e9fcb1d2e">value</a>, scope);
<a name="l02989"></a>02989         <span class="keywordflow">if</span> (!value) <span class="keywordflow">return</span> NULL;
<a name="l02990"></a>02990         <span class="keywordflow">return</span> createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccae089a7a50c323705d8c848d0308ca41b">RT_RETURN</a>, value);
<a name="l02991"></a>02991 }
<a name="l02992"></a>02992 
<a name="l03017"></a><a class="code" href="interpreter_8h.html#a3907f4b04d219b06c4967b92af485ff8">03017</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretLoopStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l03018"></a>03018                                     <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l03019"></a>03019 {
<a name="l03020"></a>03020         <a class="code" href="struct_loop_stmt_node.html">LoopStmtNode</a> *stmt = (<a class="code" href="struct_loop_stmt_node.html">LoopStmtNode</a> *)node-&gt;<a class="code" href="struct_stmt_node.html#abe2bb8927d8a9a26b83d855fb14837e6">stmt</a>;
<a name="l03021"></a>03021         <a class="code" href="structscopeobject.html">ScopeObject</a> *outer = createScopeObject(scope);
<a name="l03022"></a>03022         <a class="code" href="struct_value_object.html">ValueObject</a> *var = NULL;
<a name="l03023"></a>03023         <span class="keywordflow">if</span> (!outer) <span class="keywordflow">return</span> NULL;
<a name="l03024"></a>03024         <span class="comment">/* Create a temporary loop variable if required */</span>
<a name="l03025"></a>03025         <span class="keywordflow">if</span> (stmt-&gt;<a class="code" href="struct_loop_stmt_node.html#afb3820072966231fd1d43eea8ebd9234">var</a>) {
<a name="l03026"></a>03026                 var = createScopeValue(outer, stmt-&gt;<a class="code" href="struct_loop_stmt_node.html#afb3820072966231fd1d43eea8ebd9234">var</a>);
<a name="l03027"></a>03027                 <span class="keywordflow">if</span> (!var) {
<a name="l03028"></a>03028                         deleteScopeObject(outer);
<a name="l03029"></a>03029                         <span class="keywordflow">return</span> NULL;
<a name="l03030"></a>03030                 }
<a name="l03031"></a>03031                 var-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> = <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>;
<a name="l03032"></a>03032                 var-&gt;<a class="code" href="struct_value_object.html#a66e5eb0433f8150bf24cfc86856efe4e">data</a>.<a class="code" href="union_value_data.html#abc2f11fb39990140dbc322610ba52f70">i</a> = 0;
<a name="l03033"></a>03033                 var-&gt;<a class="code" href="struct_value_object.html#a08cfa02ff5b2f4ee7307c62c95089373">semaphore</a> = 1;
<a name="l03034"></a>03034         }
<a name="l03035"></a>03035         <span class="keywordflow">while</span> (1) {
<a name="l03036"></a>03036                 <span class="keywordflow">if</span> (stmt-&gt;<a class="code" href="struct_loop_stmt_node.html#a53a86fb7f989cf43f54192b8f3ad6c1a">guard</a>) {
<a name="l03037"></a>03037                         <a class="code" href="struct_value_object.html">ValueObject</a> *val = interpretExprNode(stmt-&gt;<a class="code" href="struct_loop_stmt_node.html#a53a86fb7f989cf43f54192b8f3ad6c1a">guard</a>, outer);
<a name="l03038"></a>03038                         <a class="code" href="struct_value_object.html">ValueObject</a> *use = val;
<a name="l03039"></a>03039                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> cast = 0;
<a name="l03040"></a>03040                         <span class="keywordtype">int</span> guardval;
<a name="l03041"></a>03041                         <span class="keywordflow">if</span> (val-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1aa7db6a14e86242b201db0d4993d61862">VT_BOOLEAN</a> &amp;&amp; val-&gt;<a class="code" href="struct_value_object.html#ad2d5ae1b91e2d7bbe9f262f0e8889b8d">type</a> != <a class="code" href="interpreter_8h.html#ad9971b6ef33e02ba2c75d19c1d2518a1a656b93fb21c4267dae17573f6129fe93">VT_INTEGER</a>) {
<a name="l03042"></a>03042                                 use = castBooleanImplicit(val, scope);
<a name="l03043"></a>03043                                 <span class="keywordflow">if</span> (!use) {
<a name="l03044"></a>03044                                         deleteScopeObject(outer);
<a name="l03045"></a>03045                                         deleteValueObject(val);
<a name="l03046"></a>03046                                         <span class="keywordflow">return</span> NULL;
<a name="l03047"></a>03047                                 }
<a name="l03048"></a>03048                                 cast = 1;
<a name="l03049"></a>03049                         }
<a name="l03050"></a>03050                         guardval = <a class="code" href="interpreter_8h.html#ab09c63bb17c41b5d1c56f89c2a7c0306">getInteger</a>(use);
<a name="l03051"></a>03051                         <span class="keywordflow">if</span> (cast) deleteValueObject(use);
<a name="l03052"></a>03052                         deleteValueObject(val);
<a name="l03053"></a>03053                         <span class="keywordflow">if</span> (guardval == 0) <span class="keywordflow">break</span>;
<a name="l03054"></a>03054                 }
<a name="l03055"></a>03055                 <span class="keywordflow">if</span> (stmt-&gt;<a class="code" href="struct_loop_stmt_node.html#a6844fd9206ed5d6b4fd48fc1365969aa">body</a>) {
<a name="l03056"></a>03056                         <a class="code" href="struct_return_object.html">ReturnObject</a> *result = interpretBlockNode(stmt-&gt;<a class="code" href="struct_loop_stmt_node.html#a6844fd9206ed5d6b4fd48fc1365969aa">body</a>, outer);
<a name="l03057"></a>03057                         <span class="keywordflow">if</span> (!result) {
<a name="l03058"></a>03058                                 deleteScopeObject(outer);
<a name="l03059"></a>03059                                 <span class="keywordflow">return</span> NULL;
<a name="l03060"></a>03060                         }
<a name="l03061"></a>03061                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (result-&gt;<a class="code" href="struct_return_object.html#a79da4f77fc9fa5dfeefbd750b0caddb0">type</a> == <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccaa22f8c8892450d4ee8806a80a7e12b64">RT_BREAK</a>) {
<a name="l03062"></a>03062                                 deleteReturnObject(result);
<a name="l03063"></a>03063                                 <span class="keywordflow">break</span>;
<a name="l03064"></a>03064                         }
<a name="l03065"></a>03065                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (result-&gt;<a class="code" href="struct_return_object.html#a79da4f77fc9fa5dfeefbd750b0caddb0">type</a> == <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccae089a7a50c323705d8c848d0308ca41b">RT_RETURN</a>) {
<a name="l03066"></a>03066                                 deleteScopeObject(outer);
<a name="l03067"></a>03067                                 <span class="keywordflow">return</span> result;
<a name="l03068"></a>03068                         }
<a name="l03069"></a>03069                         <span class="keywordflow">else</span>
<a name="l03070"></a>03070                                 deleteReturnObject(result);
<a name="l03071"></a>03071                 }
<a name="l03072"></a>03072                 <span class="keywordflow">if</span> (stmt-&gt;<a class="code" href="struct_loop_stmt_node.html#a0400ab555fff51b09f79c495af20f37f">update</a>) {
<a name="l03073"></a>03073                         <span class="comment">/* A little efficiency hack: if we know the operation</span>
<a name="l03074"></a>03074 <span class="comment">                         * to perform, don&#39;t bother evaluating the ExprNode</span>
<a name="l03075"></a>03075 <span class="comment">                         * structure, just go ahead and do it to the loop</span>
<a name="l03076"></a>03076 <span class="comment">                         * variable. */</span>
<a name="l03077"></a>03077                         <span class="keywordflow">if</span> (stmt-&gt;<a class="code" href="struct_loop_stmt_node.html#a0400ab555fff51b09f79c495af20f37f">update</a>-&gt;<a class="code" href="struct_expr_node.html#ab5f285d791068c69dbca0610d8c36c99">type</a> == ET_OP) {
<a name="l03078"></a>03078                                 <a class="code" href="struct_op_expr_node.html">OpExprNode</a> *op = (<a class="code" href="struct_op_expr_node.html">OpExprNode</a> *)stmt-&gt;<a class="code" href="struct_loop_stmt_node.html#a0400ab555fff51b09f79c495af20f37f">update</a>-&gt;<a class="code" href="struct_expr_node.html#a2c6ff3dccfa2e543a46e01763adab3a8">expr</a>;
<a name="l03079"></a>03079                                 if (op-&gt;<a class="code" href="struct_op_expr_node.html#a69ff4baea505db8ed32f4c4027f24ac6">type</a> == OP_ADD)
<a name="l03080"></a>03080                                         var-&gt;<a class="code" href="struct_value_object.html#a66e5eb0433f8150bf24cfc86856efe4e">data</a>.<a class="code" href="union_value_data.html#abc2f11fb39990140dbc322610ba52f70">i</a>++;
<a name="l03081"></a>03081                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op-&gt;<a class="code" href="struct_op_expr_node.html#a69ff4baea505db8ed32f4c4027f24ac6">type</a> == OP_SUB)
<a name="l03082"></a>03082                                         var-&gt;<a class="code" href="struct_value_object.html#a66e5eb0433f8150bf24cfc86856efe4e">data</a>.<a class="code" href="union_value_data.html#abc2f11fb39990140dbc322610ba52f70">i</a>--;
<a name="l03083"></a>03083                         }
<a name="l03084"></a>03084                         <span class="keywordflow">else</span> {
<a name="l03085"></a>03085                                 <a class="code" href="struct_value_object.html">ValueObject</a> *update = interpretExprNode(stmt-&gt;<a class="code" href="struct_loop_stmt_node.html#a0400ab555fff51b09f79c495af20f37f">update</a>, outer);
<a name="l03086"></a>03086                                 <span class="keywordflow">if</span> (!update) {
<a name="l03087"></a>03087                                         deleteScopeObject(outer);
<a name="l03088"></a>03088                                         <span class="keywordflow">return</span> NULL;
<a name="l03089"></a>03089                                 }
<a name="l03090"></a>03090                                 <span class="keywordflow">if</span> (!updateScopeValue(outer, stmt-&gt;<a class="code" href="struct_loop_stmt_node.html#afb3820072966231fd1d43eea8ebd9234">var</a>, update)) {
<a name="l03091"></a>03091                                         deleteScopeObject(outer);
<a name="l03092"></a>03092                                         deleteValueObject(update);
<a name="l03093"></a>03093                                         <span class="keywordflow">return</span> NULL;
<a name="l03094"></a>03094                                 }
<a name="l03095"></a>03095                         }
<a name="l03096"></a>03096                 }
<a name="l03097"></a>03097         }
<a name="l03098"></a>03098         deleteScopeObject(outer);
<a name="l03099"></a>03099         <span class="keywordflow">return</span> createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cca5799e236aeee53b6fe285dc67cb42f00">RT_DEFAULT</a>, NULL);
<a name="l03100"></a>03100 }
<a name="l03101"></a>03101 
<a name="l03129"></a><a class="code" href="interpreter_8h.html#a8760ad4152e9a2dfeb2ed661c3ef04df">03129</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretFuncDefStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l03130"></a>03130                                        <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l03131"></a>03131 {
<a name="l03132"></a>03132         <span class="comment">/* Skip over this; we have already parsed and stored it */</span>
<a name="l03133"></a>03133         node = NULL;
<a name="l03134"></a>03134         scope = NULL;
<a name="l03135"></a>03135         <span class="keywordflow">return</span> createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cca5799e236aeee53b6fe285dc67cb42f00">RT_DEFAULT</a>, NULL);
<a name="l03136"></a>03136 }
<a name="l03137"></a>03137 
<a name="l03161"></a><a class="code" href="interpreter_8h.html#ab8680118602f725af9bbb28f2a33ba93">03161</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretExprStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l03162"></a>03162                                     <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l03163"></a>03163 {
<a name="l03164"></a>03164         <span class="comment">/* Set the implicit variable to the result of the expression */</span>
<a name="l03165"></a>03165         <a class="code" href="struct_expr_node.html">ExprNode</a> *expr = (<a class="code" href="struct_expr_node.html">ExprNode</a> *)node-&gt;<a class="code" href="struct_stmt_node.html#abe2bb8927d8a9a26b83d855fb14837e6">stmt</a>;
<a name="l03166"></a>03166         deleteValueObject(scope-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a>);
<a name="l03167"></a>03167         scope-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a> = interpretExprNode(expr, scope);
<a name="l03168"></a>03168         <span class="keywordflow">if</span> (!scope-&gt;<a class="code" href="structscopeobject.html#ae41fb9156685d42f9b30c1871603c87b">impvar</a>) <span class="keywordflow">return</span> NULL;
<a name="l03169"></a>03169         <span class="keywordflow">return</span> createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cca5799e236aeee53b6fe285dc67cb42f00">RT_DEFAULT</a>, NULL);
<a name="l03170"></a>03170 }
<a name="l03171"></a>03171 
<a name="l03172"></a>03172 <span class="comment">/* A jump table for statements.  The index of a function in the table is given</span>
<a name="l03173"></a>03173 <span class="comment"> * by its its index in the enumerated StmtType type. */</span>
<a name="l03174"></a>03174 <span class="keyword">static</span> <a class="code" href="struct_return_object.html">ReturnObject</a> *(*StmtJumpTable[12])(<a class="code" href="struct_stmt_node.html">StmtNode</a> *, <a class="code" href="structscopeobject.html">ScopeObject</a> *) = {
<a name="l03175"></a>03175         interpretCastStmtNode,
<a name="l03176"></a>03176         interpretPrintStmtNode,
<a name="l03177"></a>03177         interpretInputStmtNode,
<a name="l03178"></a>03178         interpretAssignmentStmtNode,
<a name="l03179"></a>03179         interpretDeclarationStmtNode,
<a name="l03180"></a>03180         interpretIfThenElseStmtNode,
<a name="l03181"></a>03181         interpretSwitchStmtNode,
<a name="l03182"></a>03182         interpretBreakStmtNode,
<a name="l03183"></a>03183         interpretReturnStmtNode,
<a name="l03184"></a>03184         interpretLoopStmtNode,
<a name="l03185"></a>03185         interpretFuncDefStmtNode,
<a name="l03186"></a>03186         interpretExprStmtNode };
<a name="l03187"></a>03187 
<a name="l03204"></a><a class="code" href="interpreter_8h.html#a8243b0f033288a08ae06a1fc17c46303">03204</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretStmtNode(<a class="code" href="struct_stmt_node.html">StmtNode</a> *node,     
<a name="l03205"></a>03205                                 <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l03206"></a>03206 {
<a name="l03207"></a>03207         <span class="keywordflow">return</span> StmtJumpTable[node-&gt;<a class="code" href="struct_stmt_node.html#a1a1a8ff13773a99c9344f5392cabfa13">type</a>](node, scope);
<a name="l03208"></a>03208 }
<a name="l03209"></a>03209 
<a name="l03227"></a><a class="code" href="interpreter_8h.html#a7bb6c3c2339270c356e1aaaf44c52cf7">03227</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretStmtNodeList(<a class="code" href="struct_stmt_node_list.html">StmtNodeList</a> *list, 
<a name="l03228"></a>03228                                     <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l03229"></a>03229 {
<a name="l03230"></a>03230         <a class="code" href="struct_return_object.html">ReturnObject</a> *ret = NULL;
<a name="l03231"></a>03231         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n;
<a name="l03232"></a>03232         <span class="keywordflow">for</span> (n = 0; n &lt; list-&gt;<a class="code" href="struct_stmt_node_list.html#a9036accbc55ef84c8f35058c6536fcd9">num</a>; n++) {
<a name="l03233"></a>03233                 ret = interpretStmtNode(list-&gt;<a class="code" href="struct_stmt_node_list.html#a2e9faa29350794b5434f3e2e59d048a7">stmts</a>[n], scope);
<a name="l03234"></a>03234                 <span class="keywordflow">if</span> (!ret)
<a name="l03235"></a>03235                         <span class="keywordflow">return</span> NULL;
<a name="l03236"></a>03236                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret-&gt;<a class="code" href="struct_return_object.html#a79da4f77fc9fa5dfeefbd750b0caddb0">type</a> == <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccaa22f8c8892450d4ee8806a80a7e12b64">RT_BREAK</a> || ret-&gt;<a class="code" href="struct_return_object.html#a79da4f77fc9fa5dfeefbd750b0caddb0">type</a> == <a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64ccae089a7a50c323705d8c848d0308ca41b">RT_RETURN</a>)
<a name="l03237"></a>03237                         <span class="keywordflow">return</span> ret;
<a name="l03238"></a>03238                 <span class="keywordflow">else</span> {
<a name="l03239"></a>03239                         deleteReturnObject(ret);
<a name="l03240"></a>03240                         ret = NULL;
<a name="l03241"></a>03241                 }
<a name="l03242"></a>03242         }
<a name="l03243"></a>03243         <span class="keywordflow">if</span> (!ret) ret = createReturnObject(<a class="code" href="interpreter_8h.html#a36a419f0b50a0c1d2d4cf712e0ba64cca5799e236aeee53b6fe285dc67cb42f00">RT_DEFAULT</a>, NULL);
<a name="l03244"></a>03244         <span class="keywordflow">return</span> ret;
<a name="l03245"></a>03245 }
<a name="l03246"></a>03246 
<a name="l03263"></a><a class="code" href="interpreter_8h.html#a35a65f719caa550f2d615abeb26a2200">03263</a> <a class="code" href="struct_return_object.html">ReturnObject</a> *interpretBlockNode(<a class="code" href="struct_block_node.html">BlockNode</a> *node,    
<a name="l03264"></a>03264                                  <a class="code" href="structscopeobject.html">ScopeObject</a> *scope) 
<a name="l03265"></a>03265 {
<a name="l03266"></a>03266         <a class="code" href="struct_return_object.html">ReturnObject</a> *ret = NULL;
<a name="l03267"></a>03267         <a class="code" href="structscopeobject.html">ScopeObject</a> *inner = createScopeObject(scope);
<a name="l03268"></a>03268         <span class="keywordflow">if</span> (!inner) <span class="keywordflow">return</span> NULL;
<a name="l03269"></a>03269         ret = interpretStmtNodeList(node-&gt;<a class="code" href="struct_block_node.html#a5d918092ee6d41f6be62dff435aede89">stmts</a>, inner);
<a name="l03270"></a>03270         deleteScopeObject(inner);
<a name="l03271"></a>03271         <span class="keywordflow">return</span> ret;
<a name="l03272"></a>03272 }
<a name="l03273"></a>03273 
<a name="l03290"></a><a class="code" href="interpreter_8h.html#a30be2c4c505c03683a6a3bdc4f7164aa">03290</a> <span class="keywordtype">int</span> interpretMainNode(<a class="code" href="struct_main_node.html">MainNode</a> *main) 
<a name="l03291"></a>03291 {
<a name="l03292"></a>03292         <a class="code" href="struct_return_object.html">ReturnObject</a> *ret = NULL;
<a name="l03293"></a>03293         <span class="keywordflow">if</span> (!main) <span class="keywordflow">return</span> 1;
<a name="l03294"></a>03294         ret = interpretBlockNode(main-&gt;<a class="code" href="struct_main_node.html#aee302d107abb16c48702c2699a58d49f">block</a>, NULL);
<a name="l03295"></a>03295         <span class="keywordflow">if</span> (!ret) <span class="keywordflow">return</span> 1;
<a name="l03296"></a>03296         deleteReturnObject(ret);
<a name="l03297"></a>03297         <span class="keywordflow">return</span> 0;
<a name="l03298"></a>03298 }
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Tue May 8 2012 20:29:56 for ResKnife by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
